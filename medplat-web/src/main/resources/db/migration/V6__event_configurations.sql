TRUNCATE public.event_configuration CASCADE;

INSERT INTO public.event_configuration (id,created_by,created_on,modified_by,modified_on,"day",description,event_type,event_type_detail_id,form_type_id,"hour","minute","name",config_json,state,trigger_when,event_type_detail_code,uuid) VALUES
	 (23,409,'2018-06-15 12:37:33.56',58981,'2021-01-19 16:09:49.983',NULL,NULL,'FORM_SUBMITTED',NULL,3,NULL,NULL,'WPD visit','[{"query":"select rch_wpd_mother_master.id, rch_wpd_mother_master.member_id, rch_wpd_mother_master.family_id, \n(case when imt_family.area_id is null then imt_family.location_id else cast(imt_family.area_id as integer) end) as location_id,\nto_char(rch_wpd_mother_master.date_of_delivery, ''MM/DD/YYYY'') as date_of_delivery, \nto_char(rch_wpd_mother_master.death_date, ''MM/DD/YYYY'') as death_date, \nrch_wpd_mother_master.death_reason, rch_wpd_mother_master.place_of_death, rch_wpd_mother_master.death_infra_id,\ncast(null as text) as other_death_reason,\nrch_wpd_mother_master.member_status, rch_wpd_mother_master.notification_id, \nrch_wpd_mother_master.has_delivery_happened, imt_member.cur_preg_reg_det_id, \nrch_wpd_mother_master.pregnancy_reg_det_id, rch_wpd_mother_master.created_by, \nrch_wpd_mother_master.is_discharged, rch_wpd_mother_master.discharge_date,  \nrch_wpd_mother_master.is_high_risk_case, \nrch_wpd_mother_master.family_planning_method,\nto_char(rch_wpd_mother_master.date_of_delivery + interval ''42'' day, ''MM/DD/YYYY'') as next_lmp_date,\ncase \n\twhen rch_wpd_mother_master.member_status = ''AVAILABLE''\n\tand rch_wpd_mother_master.has_delivery_happened = true\n\tand death_date is null\n\tand rch_wpd_mother_master.delivery_place = ''HOME'' \n\tand rch_wpd_mother_master.date_of_delivery > current_date - interval ''2 days''\n\tthen true else false end as generate_first_pnc\n,rch_wpd_mother_master.delivery_place\n,case when rch_wpd_mother_master.date_of_delivery is not null \n\t\tand rch_wpd_mother_master.date_of_delivery < imt_member.lmp + interval ''20 weeks'' then true\n\t\telse false end as del_before_20_weeks\nfrom rch_wpd_mother_master inner join imt_family on rch_wpd_mother_master.family_id = imt_family.id \ninner join imt_member on rch_wpd_mother_master.member_id = imt_member.id \nwhere rch_wpd_mother_master.id = #resourceId#;","queryParam":"resourceId","conditions":[{"isConditionReq":true,"condition":"''#member_status#'' == ''AVAILABLE'' && ''#has_delivery_happened#'' == ''true''","conditionParam":"member_status,has_delivery_happened","description":null,"notificaitonConfigsType":[{"id":"1cd7545e-46d0-41d0-8256-105feffcf423","type":"QUERY","template":"update techo_notification_master set state = ''COMPLETED'', modified_on = now(),action_by = #created_by# where member_id = #member_id# and state in (''PENDING'',''RESCHEDULE'') and notification_type_id = (select id from notification_type_master where code = ''FHW_WPD'');","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id,created_by","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":23,"queryMasterId":53,"queryCode":null,"queryMasterParamJson":[],"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null},{"id":"424e6076-b7ba-4e46-925f-c6a3be0891ae","type":"QUERY","template":"update imt_member set is_pregnant = false, immunisation_given = null, \nlast_delivery_date = case when ''#date_of_delivery#'' = ''null'' then imt_member.last_delivery_date else to_date((case when ''#date_of_delivery#'' = ''null'' then null else ''#date_of_delivery#'' end), ''MM/DD/YYYY'') end, \nlast_delivery_outcome = case when ''#pregnancy_outcome#'' != ''null'' then ''#pregnancy_outcome#'' else imt_member.last_delivery_outcome end,\nlast_method_of_contraception = case when ''#family_planning_method#'' != ''null'' then ''#family_planning_method#'' else imt_member.last_method_of_contraception end,\nis_high_risk_case = case when ''#is_high_risk_case#'' != ''null'' then #is_high_risk_case# else imt_member.is_high_risk_case end\nwhere id =  #member_id#","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id,is_high_risk_case,date_of_delivery,family_planning_method,pregnancy_outcome","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":23,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null},{"id":"7e53812e-c069-44cb-84a7-fa636c1f7b64","type":"QUERY","template":"update event_mobile_notification_pending set is_completed = true, state = ''COMPLETED'', \nmodified_by = #created_by#, modified_on = now() \nfrom event_configuration_type\nwhere event_mobile_notification_pending.member_id = #member_id# \nand event_mobile_notification_pending.state = ''PENDING'' \nand event_mobile_notification_pending.notification_configuration_type_id = event_configuration_type.id\nand event_configuration_type.mobile_notification_type in (select id from notification_type_master where code in (''FHW_ANC'', ''FHW_WPD'', ''TT2_ALERT'', ''IRON_SUCROSE_ALERT''))","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id,created_by","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":23,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null},{"id":"66c59fe2-d995-466a-8b12-be207bf605c0","type":"QUERY","template":"update techo_notification_master set state = ''MARK_AS_DELIVERY_HAPPENED'', modified_on = now() \nwhere member_id = #member_id# and state in (''PENDING'', ''RESCHEDULE'') \nand notification_type_id in (select id from notification_type_master where code in (''FHW_ANC'', ''TT2_ALERT'', ''IRON_SUCROSE_ALERT'', ''ASHA_ANC''));","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":23,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null},{"id":"00c526aa-d624-47f6-8387-40d5e94d3abe","type":"QUERY","template":"update rch_pregnancy_registration_det set state = ''DELIVERY_DONE'', delivery_date = ''#date_of_delivery#'' where id = #pregnancy_reg_det_id#;","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"date_of_delivery,pregnancy_reg_det_id","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":23,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null}]},{"isConditionReq":true,"condition":"''#member_status#'' == ''AVAILABLE'' && ''#has_delivery_happened#'' == ''false''","conditionParam":"member_status,has_delivery_happened","description":null,"notificaitonConfigsType":[{"id":"3afd5d29-49c6-489c-9283-2bb095cf6ae3","type":"QUERY","template":null,"mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":null,"baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":23,"queryMasterId":52,"queryCode":"mob_notification_reschedule","queryMasterParamJson":[{"parameterName":"expiary_days_add","mappingValue":null,"isFixed":false},{"parameterName":"action_by","mappingValue":"created_by","isFixed":false},{"parameterName":"due_days_add","mappingValue":null,"isFixed":false},{"parameterName":"schedule_days_add","mappingValue":"7","isFixed":true},{"parameterName":"notification_id","mappingValue":"notification_id","isFixed":false}],"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null},{"id":"93ff2dd7-f25e-4fe4-9771-6dd0a1d95197","type":"QUERY","template":"update imt_member set modified_on = now() where id = #member_id#","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":23,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null}]},{"isConditionReq":true,"condition":"#generate_first_pnc# == true","conditionParam":"generate_first_pnc","description":null,"notificaitonConfigsType":[{"id":"585097a3-3f7c-4421-b43b-a5113ff72de4","type":"QUERY","template":"INSERT INTO techo_notification_master(\n\tnotification_type_id, notification_code, location_id,\n\tfamily_id, member_id, schedule_date, due_on, expiry_date, \n\tstate, created_by, created_on, modified_by, modified_on, ref_code\n)\nselect id, null, #location_id#, #family_id#, #member_id#, ''#date_of_delivery#'',\nto_timestamp(''#date_of_delivery#'', ''MM/DD/YYYY'') + interval ''2 days'', \nto_timestamp(''#date_of_delivery#'', ''MM/DD/YYYY'') + interval ''2 days'', \n''PENDING'', #created_by#, now(), #created_by#, now(), #pregnancy_reg_det_id#\nfrom notification_type_master where code = ''FHW_PNC''","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id,family_id,date_of_delivery,created_by,pregnancy_reg_det_id,location_id","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":23,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null}]},{"isConditionReq":true,"condition":"''#member_status#'' == ''AVAILABLE'' && ''#has_delivery_happened#'' == ''true'' &&  ''#death_date#'' == ''null''","conditionParam":"member_status,has_delivery_happened,death_date","description":null,"notificaitonConfigsType":[{"id":"9b1a331b-fac5-48f0-908e-ef545e0b0c52","type":"MOBILE","template":null,"mobileNotificationType":3,"mobileNotificationTypeUUID":"bfd41946-0837-4ff7-8c16-c90d8b019c06","emailSubject":null,"emailSubjectParameter":null,"templateParameter":null,"baseDateFieldName":"date_of_delivery","refCode":"pregnancy_reg_det_id","memberFieldName":"member_id","userFieldName":null,"familyFieldName":"family_id","trigerWhen":null,"day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":[{"id":"884b8013-fa5a-435d-b6ee-8d5f68b21b49","notificationCode":"0","numberOfDaysAddedForOnDate":3,"numberOfDaysAddedForDueDate":3,"numberOfDaysAddedForExpiryDate":6,"notificationTypeConfigId":"9b1a331b-fac5-48f0-908e-ef545e0b0c52"},{"id":"2e13a686-6b3d-4ce6-8db9-29080ebebbe3","notificationCode":"1","numberOfDaysAddedForOnDate":7,"numberOfDaysAddedForDueDate":3,"numberOfDaysAddedForExpiryDate":13,"notificationTypeConfigId":"9b1a331b-fac5-48f0-908e-ef545e0b0c52"},{"id":"d31c96b6-c10c-49ee-ae0d-741e3b47ec1f","notificationCode":"2","numberOfDaysAddedForOnDate":14,"numberOfDaysAddedForDueDate":3,"numberOfDaysAddedForExpiryDate":20,"notificationTypeConfigId":"9b1a331b-fac5-48f0-908e-ef545e0b0c52"},{"id":"cc519f5f-dc4b-4714-8b7d-6edcba84c27d","notificationCode":"3","numberOfDaysAddedForOnDate":21,"numberOfDaysAddedForDueDate":3,"numberOfDaysAddedForExpiryDate":27,"notificationTypeConfigId":"9b1a331b-fac5-48f0-908e-ef545e0b0c52"},{"id":"ab633f2d-d4f9-4b66-a94b-0476f7174198","notificationCode":"4","numberOfDaysAddedForOnDate":28,"numberOfDaysAddedForDueDate":3,"numberOfDaysAddedForExpiryDate":41,"notificationTypeConfigId":"9b1a331b-fac5-48f0-908e-ef545e0b0c52"},{"id":"708be876-1da9-4291-a1e5-5abc009a8d27","notificationCode":"5","numberOfDaysAddedForOnDate":42,"numberOfDaysAddedForDueDate":3,"numberOfDaysAddedForExpiryDate":60,"notificationTypeConfigId":"9b1a331b-fac5-48f0-908e-ef545e0b0c52"}],"configId":23,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null},{"id":"54d751f7-6826-4471-a181-f9159f26cceb","type":"MOBILE","template":null,"mobileNotificationType":31,"mobileNotificationTypeUUID":"93576c97-172b-436f-9c9a-cb3e7226c524","emailSubject":null,"emailSubjectParameter":null,"templateParameter":null,"baseDateFieldName":"date_of_delivery","refCode":"cur_preg_reg_det_id","memberFieldName":"member_id","userFieldName":null,"familyFieldName":"family_id","trigerWhen":null,"day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":[{"id":"12b09d99-6c07-4d40-9a49-d121ec1883dd","notificationCode":"1","numberOfDaysAddedForOnDate":0,"numberOfDaysAddedForDueDate":null,"numberOfDaysAddedForExpiryDate":1,"notificationTypeConfigId":"54d751f7-6826-4471-a181-f9159f26cceb"},{"id":"18a7a94f-2833-4ca2-8d25-b99512bbcbe1","notificationCode":"2","numberOfDaysAddedForOnDate":2,"numberOfDaysAddedForDueDate":3,"numberOfDaysAddedForExpiryDate":5,"notificationTypeConfigId":"54d751f7-6826-4471-a181-f9159f26cceb"},{"id":"0f07620f-8266-45ba-8d5b-3f3719dbb3ef","notificationCode":"3","numberOfDaysAddedForOnDate":6,"numberOfDaysAddedForDueDate":3,"numberOfDaysAddedForExpiryDate":10,"notificationTypeConfigId":"54d751f7-6826-4471-a181-f9159f26cceb"},{"id":"09763449-b466-4f83-8d12-4bdddc6df3a0","notificationCode":"4","numberOfDaysAddedForOnDate":11,"numberOfDaysAddedForDueDate":3,"numberOfDaysAddedForExpiryDate":17,"notificationTypeConfigId":"54d751f7-6826-4471-a181-f9159f26cceb"},{"id":"fb0369f1-c5af-4047-b3d7-d9c3fdd35f23","notificationCode":"5","numberOfDaysAddedForOnDate":18,"numberOfDaysAddedForDueDate":3,"numberOfDaysAddedForExpiryDate":24,"notificationTypeConfigId":"54d751f7-6826-4471-a181-f9159f26cceb"},{"id":"da486aae-0738-4d82-950e-e23216e1eb35","notificationCode":"6","numberOfDaysAddedForOnDate":25,"numberOfDaysAddedForDueDate":3,"numberOfDaysAddedForExpiryDate":38,"notificationTypeConfigId":"54d751f7-6826-4471-a181-f9159f26cceb"},{"id":"c4432b8e-3ee8-4032-8ec5-8df1a5e59aa2","notificationCode":"7","numberOfDaysAddedForOnDate":39,"numberOfDaysAddedForDueDate":3,"numberOfDaysAddedForExpiryDate":44,"notificationTypeConfigId":"54d751f7-6826-4471-a181-f9159f26cceb"}],"configId":23,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null},{"id":"b7463aa3-b1fd-43ab-b126-07a49a1b6bf6","type":"QUERY","template":null,"mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":null,"baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":23,"queryMasterId":null,"queryCode":"generate_lmp_followup","queryMasterParamJson":[{"parameterName":"member_id","mappingValue":"member_id","isFixed":false},{"parameterName":"family_id","mappingValue":"family_id","isFixed":false},{"parameterName":"schedule_date","mappingValue":"next_lmp_date","isFixed":false},{"parameterName":"member_location_id","mappingValue":"location_id","isFixed":false},{"parameterName":"created_by","mappingValue":"created_by","isFixed":false}],"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null},{"id":"710cbd3b-711a-408f-a8b6-c63255f3aaf3","type":"QUERY","template":null,"mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":null,"baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":23,"queryMasterId":null,"queryCode":"generate_asha_lmpfu_notification","queryMasterParamJson":[{"parameterName":"member_id","mappingValue":"member_id","isFixed":false},{"parameterName":"family_id","mappingValue":"family_id","isFixed":false},{"parameterName":"schedule_date","mappingValue":"next_lmp_date","isFixed":false},{"parameterName":"member_location_id","mappingValue":"location_id","isFixed":false},{"parameterName":"created_by","mappingValue":"created_by","isFixed":false}],"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null}]},{"isConditionReq":true,"condition":"''#member_status#'' == ''AVAILABLE'' && ''#has_delivery_happened#'' == ''true'' && ''#death_date#'' != ''null''","conditionParam":"member_status,has_delivery_happened,death_date","description":null,"notificaitonConfigsType":[{"id":"9a609b44-4ac1-419f-9a56-c2b00e3981a1","type":"QUERY","template":"","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":null,"baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":23,"queryMasterId":56,"queryCode":"mark_member_as_death","queryMasterParamJson":[{"parameterName":"member_id","mappingValue":"member_id","isFixed":false}, {"parameterName":"action_by","mappingValue":"created_by","isFixed":false},{"parameterName":"family_id","mappingValue":"family_id","isFixed":false},{"parameterName":"service_type","mappingValue":"WPD_MOTHER","isFixed":true},{"parameterName":"reference_id","mappingValue":"resourceId","isFixed":false},{"parameterName":"death_reason","mappingValue":"death_reason","isFixed":false},{"parameterName":"other_death_reason","mappingValue":"other_death_reason","isFixed":false},{"parameterName":"place_of_death","mappingValue":"place_of_death","isFixed":false},{"parameterName":"location_id","mappingValue":"location_id","isFixed":false},{"parameterName":"death_date","mappingValue":"death_date","isFixed":false},{"parameterName":"health_infra_id","mappingValue":"death_infra_id","isFixed":false}],"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null}]},{"isConditionReq":true,"condition":"''#member_status#'' == ''AVAILABLE'' && ''#has_delivery_happened#'' == ''true'' &&  ''#death_date#'' == ''null'' && ''#is_discharged#'' != ''null'' && ''#is_discharged#'' == ''false''","conditionParam":"member_status,has_delivery_happened,is_discharged,death_date","description":"Create an entry for WPD_DISCHARGE Notification","notificaitonConfigsType":[{"id":"17044f5e-2900-499f-b7ac-bb4f77a8f900","type":"QUERY","template":null,"mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":null,"baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":23,"queryMasterId":null,"queryCode":"generate_discharge_notification","queryMasterParamJson":[{"parameterName":"location_id","mappingValue":"location_id","isFixed":false},{"parameterName":"family_id","mappingValue":"family_id","isFixed":false},{"parameterName":"member_id","mappingValue":"member_id","isFixed":false},{"parameterName":"date_of_delivery","mappingValue":"date_of_delivery","isFixed":false},{"parameterName":"created_by","mappingValue":"created_by","isFixed":false},{"parameterName":"pregnancy_reg_det_id","mappingValue":"cur_preg_reg_det_id","isFixed":false},{"parameterName":"id","mappingValue":"id","isFixed":false}],"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null}]},{"isConditionReq":true,"condition":"''#pregnancy_reg_det_id#'' == ''null'' || ''#pregnancy_reg_det_id#'' == ''-1''","conditionParam":"pregnancy_reg_det_id","description":"Update Current Pregnancy registration Details ID in WPD Mother Master","notificaitonConfigsType":[{"id":"fff826e7-486a-46ac-b855-659477585954","type":"QUERY","template":"update rch_wpd_mother_master set pregnancy_reg_det_id = #cur_preg_reg_det_id# where id = #id#","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"cur_preg_reg_det_id,id","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":23,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null}]},{"isConditionReq":true,"condition":"''#delivery_place#'' == ''HOME'' && ''#has_delivery_happened#'' == ''true''","conditionParam":"delivery_place,has_delivery_happened","description":null,"notificaitonConfigsType":[{"id":"8041a04c-01ae-44df-bdfb-08d812521a62","type":"QUERY","template":"INSERT INTO techo_web_notification_master(\n            notification_type_id, location_id, \n            member_id, escalation_level_id, schedule_date, \n            state, created_by, created_on, \n            modified_by, modified_on, ref_code, notification_type_escalation_id\n            )\nselect notification_type_id,#location_id#,\n\t\t\t#member_id#,notification_type.id,now(),\n\t\t\t''PENDING'',#created_by#,now(),#created_by#,now(),#id#,escalation_id\n\t\t\tfrom (select id,notification_type_id,notification_type_id||''_''||id as escalation_id from escalation_level_master where name = ''Default'' \nand notification_type_id = (select id from notification_type_master where code = ''home_delivery_verification'')) as notification_type","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id,id,created_by,location_id","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":23,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null}]},{"isConditionReq":true,"condition":"#del_before_20_weeks# == true","conditionParam":"del_before_20_weeks","description":null,"notificaitonConfigsType":[{"id":"d53536a3-4e9e-4740-aa1d-0ce9600db251","type":"QUERY","template":"update imt_member set current_para = case when current_para is not null then current_para - 1 else null end \nwhere id = #member_id#;","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":23,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null}]}]},{"query":"with wpd_child_det as(select ROW_NUMBER () OVER (ORDER BY rch_wpd_child_master.id) as row_num, rch_wpd_child_master.member_id, rch_wpd_child_master.family_id, rch_wpd_child_master.pregnancy_outcome, rch_wpd_mother_master.location_id, rch_wpd_child_master.mother_id, rch_wpd_mother_master.id as wpd_mother_id, to_char(rch_wpd_child_master.death_date,''MM/DD/YYYY'') as death_date, to_char(rch_wpd_child_master.date_of_delivery,''MM/DD/YYYY'') as dob, rch_wpd_child_master.created_by as action_by, rch_wpd_child_master.death_reason, rch_wpd_child_master.member_status, rch_wpd_child_master.place_of_death, rch_wpd_mother_master.delivery_place as place_of_birth, rch_wpd_child_master.birth_weight, rch_wpd_child_master.breast_feeding_in_one_hour as complimentary_feeding_started, rch_wpd_child_master.is_high_risk_case from rch_wpd_child_master, rch_wpd_mother_master where rch_wpd_mother_master.id = #resourceId# and rch_wpd_mother_master.id = rch_wpd_child_master.wpd_mother_id), count_det as(select count(*) as cnt from wpd_child_det) select * from wpd_child_det, count_det","queryParam":"resourceId","conditions":[{"isConditionReq":true,"condition":"#member_id# != -1 && ''#death_date#'' == ''null''","conditionParam":"member_id,death_date","description":null,"notificaitonConfigsType":[{"id":"f51c8c4f-6b2b-4dcb-8e64-ada1a3044a67","type":"MOBILE","template":null,"mobileNotificationType":4,"mobileNotificationTypeUUID":"91fb960a-6168-4d07-879f-fc3d9e637b18","emailSubject":null,"emailSubjectParameter":null,"templateParameter":null,"baseDateFieldName":"dob","refCode":null,"memberFieldName":"member_id","userFieldName":null,"familyFieldName":"family_id","trigerWhen":null,"day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":[{"id":"0606597d-8958-4935-bcf1-2cd46bd3d532","notificationCode":"1","numberOfDaysAddedForOnDate":75,"numberOfDaysAddedForDueDate":30,"numberOfDaysAddedForExpiryDate":104,"notificationTypeConfigId":"f51c8c4f-6b2b-4dcb-8e64-ada1a3044a67"},{"id":"92231745-a5c0-4c23-9dbd-07f2149335ae","notificationCode":"2","numberOfDaysAddedForOnDate":105,"numberOfDaysAddedForDueDate":30,"numberOfDaysAddedForExpiryDate":278,"notificationTypeConfigId":"f51c8c4f-6b2b-4dcb-8e64-ada1a3044a67"},{"id":"7a4c7418-e5f0-4a99-89c5-88f5f481bb45","notificationCode":"3","numberOfDaysAddedForOnDate":279,"numberOfDaysAddedForDueDate":30,"numberOfDaysAddedForExpiryDate":489,"notificationTypeConfigId":"f51c8c4f-6b2b-4dcb-8e64-ada1a3044a67"},{"id":"a000f46a-cc27-4a4b-b9b0-a5f3d206ea4e","notificationCode":"4","numberOfDaysAddedForOnDate":490,"numberOfDaysAddedForDueDate":30,"numberOfDaysAddedForExpiryDate":730,"notificationTypeConfigId":"f51c8c4f-6b2b-4dcb-8e64-ada1a3044a67"},{"id":"43a79980-2efa-4652-838c-b1d2705a3abe","notificationCode":"5","numberOfDaysAddedForOnDate":731,"numberOfDaysAddedForDueDate":30,"numberOfDaysAddedForExpiryDate":916,"notificationTypeConfigId":"f51c8c4f-6b2b-4dcb-8e64-ada1a3044a67"},{"id":"f4bc6173-51b0-464b-8036-4810765f7713","notificationCode":"6","numberOfDaysAddedForOnDate":917,"numberOfDaysAddedForDueDate":30,"numberOfDaysAddedForExpiryDate":1095,"notificationTypeConfigId":"f51c8c4f-6b2b-4dcb-8e64-ada1a3044a67"},{"id":"d6daf397-c9fd-4fdd-99a9-37192d7794b3","notificationCode":"7","numberOfDaysAddedForOnDate":1096,"numberOfDaysAddedForDueDate":30,"numberOfDaysAddedForExpiryDate":1281,"notificationTypeConfigId":"f51c8c4f-6b2b-4dcb-8e64-ada1a3044a67"},{"id":"536f68b3-ee1e-4e66-b748-6e561d0cb50f","notificationCode":"8","numberOfDaysAddedForOnDate":1282,"numberOfDaysAddedForDueDate":30,"numberOfDaysAddedForExpiryDate":1461,"notificationTypeConfigId":"f51c8c4f-6b2b-4dcb-8e64-ada1a3044a67"},{"id":"2c16c716-d4a0-480e-b02e-ca27acdc75bb","notificationCode":"9","numberOfDaysAddedForOnDate":1462,"numberOfDaysAddedForDueDate":30,"numberOfDaysAddedForExpiryDate":1647,"notificationTypeConfigId":"f51c8c4f-6b2b-4dcb-8e64-ada1a3044a67"},{"id":"5c941e59-b1cb-4005-96a3-01e302306f65","notificationCode":"10","numberOfDaysAddedForOnDate":1648,"numberOfDaysAddedForDueDate":30,"numberOfDaysAddedForExpiryDate":1799,"notificationTypeConfigId":"f51c8c4f-6b2b-4dcb-8e64-ada1a3044a67"},{"id":"e5085993-9df1-42e2-b808-4ebbac855ae7","notificationCode":"12","numberOfDaysAddedForOnDate":1827,"numberOfDaysAddedForDueDate":30,"numberOfDaysAddedForExpiryDate":2013,"notificationTypeConfigId":"f51c8c4f-6b2b-4dcb-8e64-ada1a3044a67"}],"configId":23,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null},{"id":"7c6ba928-e102-4232-8646-9859e14796dc","type":"MOBILE","template":null,"mobileNotificationType":32,"mobileNotificationTypeUUID":"51095276-de38-4e97-8744-ec1a688764a2","emailSubject":null,"emailSubjectParameter":null,"templateParameter":null,"baseDateFieldName":"dob","refCode":null,"memberFieldName":"member_id","userFieldName":null,"familyFieldName":"family_id","trigerWhen":null,"day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":[{"id":"b859f0a2-4313-4eb0-b9af-79ed4db07b99","notificationCode":"1","numberOfDaysAddedForOnDate":90,"numberOfDaysAddedForDueDate":30,"numberOfDaysAddedForExpiryDate":180,"notificationTypeConfigId":"7c6ba928-e102-4232-8646-9859e14796dc"},{"id":"f96a87c2-96e6-49d5-85c6-558eaefd12d7","notificationCode":"2","numberOfDaysAddedForOnDate":181,"numberOfDaysAddedForDueDate":30,"numberOfDaysAddedForExpiryDate":210,"notificationTypeConfigId":"7c6ba928-e102-4232-8646-9859e14796dc"},{"id":"bd228218-3be9-47a5-a7b9-47e05f05bded","notificationCode":"3","numberOfDaysAddedForOnDate":211,"numberOfDaysAddedForDueDate":30,"numberOfDaysAddedForExpiryDate":300,"notificationTypeConfigId":"7c6ba928-e102-4232-8646-9859e14796dc"},{"id":"ab54bcd0-4b39-4b46-9a0d-cb2d43d99524","notificationCode":"4","numberOfDaysAddedForOnDate":301,"numberOfDaysAddedForDueDate":30,"numberOfDaysAddedForExpiryDate":360,"notificationTypeConfigId":"7c6ba928-e102-4232-8646-9859e14796dc"},{"id":"aa0f6303-5677-4b3e-b40e-a6b27d5c0314","notificationCode":"5","numberOfDaysAddedForOnDate":361,"numberOfDaysAddedForDueDate":30,"numberOfDaysAddedForExpiryDate":690,"notificationTypeConfigId":"7c6ba928-e102-4232-8646-9859e14796dc"},{"id":"6d327f4d-c1dc-4a6f-8f81-010aa87599a5","notificationCode":"6","numberOfDaysAddedForOnDate":691,"numberOfDaysAddedForDueDate":30,"numberOfDaysAddedForExpiryDate":720,"notificationTypeConfigId":"7c6ba928-e102-4232-8646-9859e14796dc"}],"configId":23,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null},{"id":"83c20288-eab6-488f-b7c0-a1bcea3ca4a6","type":"QUERY","template":"update imt_member SET modified_on = now(), modified_by = #created_by#, complementary_feeding_started = #complimentary_feeding_started#, birth_weight = #birth_weight#, place_of_birth = ''#place_of_birth#'', is_high_risk_case = #is_high_risk_case# where id = #member_id#;","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"place_of_birth,member_id,complimentary_feeding_started,is_high_risk_case,birth_weight,created_by","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":23,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null}]},{"isConditionReq":true,"condition":"\"#pregnancy_outcome#\" == \"SBIRTH\"","conditionParam":"pregnancy_outcome","description":null,"notificaitonConfigsType":[{"id":"eebd58eb-1750-44ca-862a-1b03a9296e72","type":"QUERY","template":"with user_det as(\nselect um_user.id as user_id from um_user,um_user_location where um_user.id = um_user_location.user_id \nand um_user_location.state = ''ACTIVE'' and um_user.state = ''ACTIVE'' \nand um_user_location.loc_id in (select parent_id from location_hierchy_closer_det where child_id = #location_id#)\nand um_user.role_id in (select id from um_role_master where code in (''mo_uphc'',''mo_phc''))\nlimit 1\n),insert_still_birth_mo as(\nINSERT INTO techo_web_notification_master(\n            notification_type_id, location_id, \n            member_id, escalation_level_id, schedule_date, \n            state, created_by, created_on, \n            modified_by, modified_on, ref_code, notification_type_escalation_id\n            )\nselect notification_type_id,#location_id#,\n\t\t\t#mother_id#,notification_type.id,now(),\n\t\t\t''PENDING'',#action_by#,now(),#action_by#,now(),#wpd_mother_id#,escalation_id\n\t\t\tfrom (select id,notification_type_id,notification_type_id||''_''||id as escalation_id from escalation_level_master where name = ''Default'' \nand notification_type_id = (select id from notification_type_master where code = ''still_birth_verification_mo'')) as notification_type\nreturning id\n)\nINSERT INTO techo_web_notification_master(\n            notification_type_id, location_id, \n            user_id,member_id, escalation_level_id, schedule_date, \n            state, created_by, created_on, \n            modified_by, modified_on, ref_code,related_notification_id, notification_type_escalation_id\n            )\nselect notification_type_id,#location_id#,(select user_id from user_det)\n\t\t\t,#mother_id#,notification_type.id,now(),\n\t\t\t''PENDING'',#action_by#,now(),#action_by#,now(),#wpd_mother_id#,insert_still_birth_mo.id,escalation_id\n\t\t\tfrom (select id,notification_type_id,notification_type_id||''_''||id as escalation_id from escalation_level_master where name = ''Default'' \nand notification_type_id = (select id from notification_type_master where code = ''still_birth_verification_ttc'')) as notification_type\n,insert_still_birth_mo;","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"action_by,mother_id,location_id,wpd_mother_id","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":23,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null}]},{"isConditionReq":true,"condition":"#cnt# > 1 && #row_num# == #cnt#","conditionParam":"cnt,row_num","description":null,"notificaitonConfigsType":[{"id":"6dc813d7-e034-4fc9-9ef3-1b337e98397e","type":"QUERY","template":"with user_det as(\nselect um_user.id as user_id from um_user,um_user_location where um_user.id = um_user_location.user_id \nand um_user_location.state = ''ACTIVE'' and um_user.state = ''ACTIVE'' \nand um_user_location.loc_id in (select parent_id from location_hierchy_closer_det where child_id = #location_id#)\nand um_user.role_id = (select id from um_role_master where code in (''FHW''))\nlimit 1\n)\nINSERT INTO techo_web_notification_master(\n            notification_type_id, location_id, \n            user_id,member_id, escalation_level_id, schedule_date, \n            state, created_by, created_on, \n            modified_by, modified_on, ref_code, notification_type_escalation_id\n            )\nselect notification_type_id,#location_id#\n\t,(select user_id from user_det),#mother_id#,notification_type.id,now(),\n\t''PENDING'',#action_by#,now(),#action_by#,now(),#wpd_mother_id#,escalation_id\n\tfrom (select id,notification_type_id,notification_type_id||''_''||id as escalation_id from escalation_level_master where name = ''Default'' \nand notification_type_id = (select id from notification_type_master where code = ''twin_deliveries_verification'')) as notification_type","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"action_by,mother_id,location_id,wpd_mother_id","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":23,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null}]}]}]','ACTIVE',NULL,'FHW_WPD','0e7e8c0f-c91e-4173-8a80-93aa92928492'),
	 (51,409,'2019-02-14 19:43:37.017',58981,'2021-08-09 13:42:13.419',NULL,'It''s call when new child was added thru FHW','FORM_SUBMITTED',NULL,33,NULL,NULL,'New Child Added','[{"query":"select imt_member.id as member_id,imt_family.id as family_id ,to_char(dob,''MM/DD/YYYY'') as dob,current_date - cast(dob as date) as days from imt_member,imt_family where imt_member.family_id = imt_family.family_id and imt_member.id = #resourceId#","queryParam":"resourceId","conditions":[{"isConditionReq":true,"condition":"#days# < 75","conditionParam":"days","description":null,"notificaitonConfigsType":[{"id":"dfa2b7ee-0ae4-4d5e-bb8e-20252905ebc6","type":"MOBILE","template":null,"mobileNotificationType":4,"mobileNotificationTypeUUID":"91fb960a-6168-4d07-879f-fc3d9e637b18","emailSubject":null,"emailSubjectParameter":null,"templateParameter":null,"baseDateFieldName":"dob","refCode":"","memberFieldName":"member_id","userFieldName":null,"familyFieldName":"family_id","trigerWhen":null,"day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":[{"id":"088b9d3d-fe68-4079-8e07-926b4fa04054","notificationCode":"1","numberOfDaysAddedForOnDate":1,"numberOfDaysAddedForDueDate":7,"numberOfDaysAddedForExpiryDate":41,"notificationTypeConfigId":"dfa2b7ee-0ae4-4d5e-bb8e-20252905ebc6"},{"id":"3830de33-3131-465c-bb94-97844bd27918","notificationCode":"2","numberOfDaysAddedForOnDate":42,"numberOfDaysAddedForDueDate":7,"numberOfDaysAddedForExpiryDate":74,"notificationTypeConfigId":"dfa2b7ee-0ae4-4d5e-bb8e-20252905ebc6"}],"configId":51,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null}]}]}]','ACTIVE',NULL,'FHS_NEW_CHILD','1bd35d1c-9aad-4801-a740-2a5a91e936f4'),
	 (19,1,'2018-04-30 17:15:17.545',60512,'2021-04-07 18:43:55.831',NULL,NULL,'FORM_SUBMITTED',NULL,2,NULL,NULL,'ANC_config','[{"query":"select rch_anc_master.id, rch_anc_master.member_id, imt_family.id as family_id,  rch_anc_master.is_from_web,\n(case when imt_family.area_id is null then imt_family.location_id else cast(imt_family.area_id as integer) end) as location_id, \ntecho_notification_master.id as notification_id, rch_anc_master.member_status, rch_anc_master.created_by as created_by, \nrch_anc_master.haemoglobin_count, rch_anc_master.jsy_payment_done, rch_anc_master.jsy_beneficiary, rch_anc_master.is_high_risk_case, \nrch_anc_master.blood_group, rch_anc_master.weight, rch_anc_master.last_delivery_outcome, \nto_char((case when rch_anc_master.lmp is null then imt_member.lmp else rch_anc_master.lmp end + interval ''1'' day * 281), ''MM/DD/YYYY'') as edd,\nto_char(death_date,''MM/DD/YYYY'') as death_date, death_reason, place_of_death, death_infra_id,\ncast(null as text) as other_death_reason,\nto_char(rch_anc_master.lmp,''MM/DD/YYYY'') as last_lmp_date, \nimt_member.cur_preg_reg_det_id,rch_anc_master.pregnancy_reg_det_id, \ncase when rch_anc_master.service_date is null then to_char(current_date, ''DD/MM/YYYY'') else to_char(rch_anc_master.service_date, ''DD/MM/YYYY'') end as service_date,\nto_char(rch_anc_master.iron_def_anemia_inj_due_date, ''MM/DD/YYYY'') as iron_sucrose_due_date,\nto_char(tt1.given_on, ''MM/DD/YYYY'') as tt1_given_date,\nto_char(tt2.given_on, ''MM/DD/YYYY'') as tt2_given_date,\ncase when emnp.id is null then false else true end as tt2_event_configured,\ntt2_alert.id as tt2_alert_id\nfrom rch_anc_master inner join imt_member on rch_anc_master.member_id = imt_member.id \ninner join imt_family on imt_family.family_id = imt_member.family_id \nleft join techo_notification_master on techo_notification_master.member_id = rch_anc_master.member_id and techo_notification_master.notification_type_id = 2 and techo_notification_master.state in (''PENDING'',''RESCHEDULE'') \nleft join rch_immunisation_master tt1 on tt1.member_id = rch_anc_master.member_id and tt1.pregnancy_reg_det_id = rch_anc_master.pregnancy_reg_det_id and tt1.immunisation_given = ''TT1''\nleft join rch_immunisation_master tt2 on tt2.member_id = rch_anc_master.member_id and tt2.pregnancy_reg_det_id = rch_anc_master.pregnancy_reg_det_id and tt2.immunisation_given = ''TT2''\nleft join event_mobile_notification_pending emnp on emnp.member_id = rch_anc_master.member_id and emnp.state = ''PENDING'' and emnp.notification_configuration_type_id = (\n\tselect id from event_configuration_type where mobile_notification_type = (select id from notification_type_master where code = ''TT2_ALERT'')\n)\nleft join techo_notification_master tt2_alert on tt2_alert.member_id = rch_anc_master.member_id and tt2_alert.state = ''PENDING'' and tt2_alert.notification_type_id = (\n\tselect id from notification_type_master where code = ''TT2_ALERT''\n)\nwhere rch_anc_master.id = #resourceId# limit 1;","queryParam":"resourceId","conditions":[{"isConditionReq":true,"condition":"''#member_status#'' == ''DEATH''","conditionParam":"member_status","description":null,"notificaitonConfigsType":[{"id":"50c8d1d9-5b30-4d52-bf13-7d39243c27eb","type":"QUERY","template":null,"mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":null,"baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":19,"queryMasterId":56,"queryCode":"mark_member_as_death","queryMasterParamJson":[{"parameterName":"member_id","mappingValue":"member_id","isFixed":false},{"parameterName":"action_by","mappingValue":"created_by","isFixed":false},{"parameterName":"family_id","mappingValue":"family_id","isFixed":false},{"parameterName":"service_type","mappingValue":"FHW_ANC","isFixed":true},{"parameterName":"reference_id","mappingValue":"id","isFixed":false},{"parameterName":"death_reason","mappingValue":"death_reason","isFixed":false},{"parameterName":"other_death_reason","mappingValue":"other_death_reason","isFixed":false},{"parameterName":"place_of_death","mappingValue":"place_of_death","isFixed":false},{"parameterName":"location_id","mappingValue":"location_id","isFixed":false},{"parameterName":"death_date","mappingValue":"death_date","isFixed":false},{"parameterName":"health_infra_id","mappingValue":"death_infra_id","isFixed":false}],"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null},{"id":"75bf1f30-d589-4f37-a866-1c1436fe3631","type":"QUERY","template":null,"mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":null,"baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":19,"queryMasterId":53,"queryCode":"mob_notification_mark_as_complete","queryMasterParamJson":[{"parameterName":"action_by","mappingValue":"created_by","isFixed":false},{"parameterName":"notification_id","mappingValue":"notification_id","isFixed":false}],"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null}]},{"isConditionReq":true,"condition":"''#notification_id#'' == ''null'' && ''#member_status#'' == ''AVAILABLE'' && (''#is_from_web#'' == ''null'' || #is_from_web# == false)","conditionParam":"is_from_web,member_status,notification_id","description":null,"notificaitonConfigsType":[{"id":"5d884ebb-f202-4011-8e72-1f4814797473","type":"QUERY","template":"update techo_notification_master set state = ''COMPLETED'' , action_by = #created_by# \nwhere member_id = #member_id# and state in (''PENDING'',''RESCHEDULE'')  and notification_type_id = (select id from notification_type_master where code = ''FHW_ANC'');","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id,created_by","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":19,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null}]},{"isConditionReq":true,"condition":"''#notification_id#'' !== ''null'' && ''#member_status#'' == ''AVAILABLE''","conditionParam":"member_status,notification_id","description":null,"notificaitonConfigsType":[{"id":"1daab3d9-98b6-4267-949d-15e577a5ec03","type":"QUERY","template":null,"mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":null,"baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":19,"queryMasterId":53,"queryCode":"mob_notification_mark_as_complete","queryMasterParamJson":[{"parameterName":"action_by","mappingValue":"created_by","isFixed":false},{"parameterName":"notification_id","mappingValue":"notification_id","isFixed":false}],"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null}]},{"isConditionReq":true,"condition":"''#member_status#'' == ''WRONGLY_REGISTERED''","conditionParam":"member_status","description":null,"notificaitonConfigsType":[{"id":"30293ed6-8f45-41d2-8aec-bc97b65a551f","type":"QUERY","template":null,"mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":null,"baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":19,"queryMasterId":54,"queryCode":"mark_as_wrongly_pregnancy_mark","queryMasterParamJson":[{"parameterName":"member_id","mappingValue":"member_id","isFixed":false},{"parameterName":"action_by","mappingValue":"created_by","isFixed":false},{"parameterName":"family_id","mappingValue":"family_id","isFixed":false},{"parameterName":"normal_cycle_days","mappingValue":"normal_cycle_days","isFixed":false},{"parameterName":"last_lmp_date","mappingValue":"last_lmp_date","isFixed":false},{"parameterName":"pregnancy_reg_det_id","mappingValue":"pregnancy_reg_det_id","isFixed":false},{"parameterName":"member_location_id","mappingValue":"location_id","isFixed":false}],"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null},{"id":"bbc08f94-cc1b-4e6c-be8e-aebaafd50f8c","type":"QUERY","template":null,"mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":null,"baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":19,"queryMasterId":53,"queryCode":"mob_notification_mark_as_complete","queryMasterParamJson":[{"parameterName":"action_by","mappingValue":"created_by","isFixed":false},{"parameterName":"notification_id","mappingValue":"notification_id","isFixed":false}],"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null}]},{"isConditionReq":true,"condition":"''#last_lmp_date#'' != ''null'' || ''#edd#'' != ''null'' || #weight# != null || ''#blood_group#'' != ''null'' || #jsy_beneficiary# != null || #jsy_payment_done# != null || #haemoglobin_count# != null || #is_high_risk_case# != null || ''#last_delivery_outcome#'' != ''null''","conditionParam":"jsy_beneficiary,is_high_risk_case,edd,last_delivery_outcome,weight,blood_group,haemoglobin_count,last_lmp_date,jsy_payment_done","description":null,"notificaitonConfigsType":[{"id":"2217c524-4f2b-4f05-9053-7b4ec3fb21dc","type":"QUERY","template":"update imt_member set \nanc_visit_dates = concat((case when anc_visit_dates is not null then concat(anc_visit_dates,'','') else null end), ''#service_date#''), \nlmp = case when ''#last_lmp_date#'' = ''null'' then imt_member.lmp else cast((case when ''#last_lmp_date#'' = ''null'' then null else ''#last_lmp_date#'' end) as date) end, \nedd = case when ''#edd#'' = ''null'' then imt_member.edd else cast((case when ''#edd#'' = ''null'' then null else ''#edd#'' end) as date) end, \nearly_registration = ((case when ''#last_lmp_date#'' = ''null'' then imt_member.lmp else cast((case when ''#last_lmp_date#'' = ''null'' then null else ''#last_lmp_date#'' end) as date) end) + 100 * INTERVAL ''1 day'') >= now(), \nweight = (case when #weight# is not null then #weight# else imt_member.weight end), \nblood_group = (case when ''#blood_group#'' != ''null'' then ''#blood_group#'' else imt_member.blood_group end), \njsy_payment_given = case when #jsy_payment_done# is not null then #jsy_payment_done# else imt_member.jsy_payment_given end, \njsy_beneficiary = case when #jsy_beneficiary# is not null then #jsy_beneficiary# else imt_member.jsy_beneficiary end, \nis_high_risk_case = case when #is_high_risk_case# is not null and #is_high_risk_case# = true then #is_high_risk_case# else imt_member.is_high_risk_case end, \nhaemoglobin = case when #haemoglobin_count# is not null then #haemoglobin_count# else imt_member.haemoglobin end, \nlast_delivery_outcome = case when ''#last_delivery_outcome#'' != ''null'' then ''#last_delivery_outcome#'' else imt_member.last_delivery_outcome end, \nmodified_on = now(), modified_by = #created_by# where id = #member_id#;","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id,jsy_beneficiary,is_high_risk_case,edd,service_date,last_delivery_outcome,weight,blood_group,haemoglobin_count,last_lmp_date,created_by,jsy_payment_done","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":19,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null}]},{"isConditionReq":true,"condition":"''#last_lmp_date#'' != ''null'' && ''#member_status#'' != ''WRONGLY_REGISTERED''","conditionParam":"member_status,last_lmp_date","description":null,"notificaitonConfigsType":[{"id":"c8002440-07ae-4b5b-b9b3-f488eb41264d","type":"QUERY","template":"update rch_pregnancy_registration_det set lmp_date = ''#last_lmp_date#'', edd = (cast(''#last_lmp_date#'' as date) + interval ''1'' day * 281), modified_on = now(), modified_by = #created_by#  where id = #pregnancy_reg_det_id#;\nupdate event_mobile_notification_pending set base_date = ''#last_lmp_date#'', modified_on = now(), modified_by = #created_by#  where member_id = #member_id#  and notification_configuration_type_id in (''5d1131bc-f5bc-4a4a-8d7d-6dfd3f512f0a'',''faedb8e7-3e46-40a2-a9ac-ea7d5de944fa'') and ref_code = #pregnancy_reg_det_id#;","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id,last_lmp_date,created_by,pregnancy_reg_det_id","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":19,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null}]},{"isConditionReq":true,"condition":"''#pregnancy_reg_det_id#'' == ''null'' || ''#pregnancy_reg_det_id#'' == ''-1''","conditionParam":"pregnancy_reg_det_id","description":null,"notificaitonConfigsType":[{"id":"fbe31e48-ade3-441f-8e4c-391a00f4cee2","type":"QUERY","template":"update rch_anc_master set pregnancy_reg_det_id = #cur_preg_reg_det_id# where id = #id#","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"cur_preg_reg_det_id,id","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":19,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null}]},{"isConditionReq":true,"condition":"''#tt1_given_date#'' != ''null'' && ''#tt2_given_date#'' == ''null'' && #tt2_event_configured# == false && #tt2_alert_id# == null","conditionParam":"tt1_given_date,tt2_given_date,tt2_event_configured,tt2_alert_id","description":"This will generate the TT2 alert for the beneficiary","notificaitonConfigsType":[{"id":"45056772-3000-40ea-926c-a63a4f140e38","type":"MOBILE","template":null,"mobileNotificationType":35,"mobileNotificationTypeUUID":"cb251690-e755-4e6f-aacd-32deccb13b79","emailSubject":null,"emailSubjectParameter":null,"templateParameter":null,"baseDateFieldName":"tt1_given_date","refCode":"pregnancy_reg_det_id","memberFieldName":"member_id","userFieldName":null,"familyFieldName":"family_id","trigerWhen":null,"day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":[{"id":"e2b029c3-65e6-48f7-a1c7-15e33bd32d97","notificationCode":"0","numberOfDaysAddedForOnDate":28,"numberOfDaysAddedForDueDate":31,"numberOfDaysAddedForExpiryDate":null,"notificationTypeConfigId":"45056772-3000-40ea-926c-a63a4f140e38"}],"configId":19,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null}]},{"isConditionReq":true,"condition":"''#tt2_given_date#'' != ''null'' && #tt2_alert_id# != null","conditionParam":"tt2_given_date,tt2_alert_id","description":null,"notificaitonConfigsType":[{"id":"522984cd-ccc4-4efb-84e8-ded121c6b2bd","type":"QUERY","template":null,"mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":null,"baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":19,"queryMasterId":null,"queryCode":"mob_notification_mark_as_complete","queryMasterParamJson":[{"parameterName":"action_by","mappingValue":"created_by","isFixed":false},{"parameterName":"notification_id","mappingValue":"tt2_alert_id","isFixed":false}],"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null}]},{"isConditionReq":true,"condition":"''#iron_sucrose_due_date#'' != ''null''","conditionParam":"iron_sucrose_due_date","description":null,"notificaitonConfigsType":[{"id":"a2cd5671-beda-4e6d-a355-5f1b107369c7","type":"MOBILE","template":null,"mobileNotificationType":36,"mobileNotificationTypeUUID":"99d837e9-3df4-4dc9-aafc-b84660d8b066","emailSubject":null,"emailSubjectParameter":null,"templateParameter":null,"baseDateFieldName":"iron_sucrose_due_date","refCode":"pregnancy_reg_det_id","memberFieldName":"member_id","userFieldName":null,"familyFieldName":"family_id","trigerWhen":null,"day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":[{"id":"0e41aa0f-d0b0-47c4-ab65-e4fdbe1c07a3","notificationCode":"0","numberOfDaysAddedForOnDate":0,"numberOfDaysAddedForDueDate":3,"numberOfDaysAddedForExpiryDate":null,"notificationTypeConfigId":"a2cd5671-beda-4e6d-a355-5f1b107369c7"}],"configId":19,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null}]}]}]','ACTIVE',NULL,'FHW_ANC','b0c0867b-d2b9-4ba4-8feb-b8d20147addd'),
	 (56,58981,'2019-04-02 11:21:53.919',1,'2021-01-13 20:22:06.427965',NULL,NULL,'FORM_SUBMITTED',NULL,40,NULL,NULL,'Migration Out Event','[{"query":"select id, member_id, created_by, out_of_state from migration_master where id = #resourceId#;","queryParam":"resourceId","conditions":[{"isConditionReq":true,"condition":"#out_of_state# == null || #out_of_state# == false","conditionParam":"out_of_state","description":null,"notificaitonConfigsType":[{"id":"5edf9093-ca82-48bf-8772-03390bacb2f8","type":"QUERY","template":"update techo_notification_master set state = case when state = ''PENDING'' then ''MARK_AS_MIGRATED_PENDING'' \n\twhen state = ''RESCHEDULE'' then ''MARK_AS_MIGRATED_RESCHEDULE'' end, \nmodified_on = now(), modified_by = #created_by# \nwhere member_id = #member_id# and state in (''PENDING'', ''RESCHEDULE'');\n\nupdate event_mobile_notification_pending set is_completed = true, state = ''MARK_AS_MIGRATED_PENDING'', \nmodified_by = #created_by#, modified_on = now() from event_mobile_configuration \nwhere event_mobile_notification_pending.notification_configuration_type_id = event_mobile_configuration.id \nand member_id = #member_id# and state = ''PENDING'';\n\nupdate imt_member set state = ''com.argusoft.imtecho.member.state.migrated'', \nmodified_on = now(), modified_by = #created_by# where imt_member.id = #member_id#;\n\nwith childs as (\n\tselect child_id from migration_child_rel where migration_id = #id#\n), update_notifications as (\n\tupdate techo_notification_master set state = case when state = ''PENDING'' then ''MARK_AS_MIGRATED_PENDING'' \n\t\twhen state = ''RESCHEDULE'' then ''MARK_AS_MIGRATED_RESCHEDULE'' end, \n\tmodified_on = now(), modified_by = #created_by# \n\twhere member_id in (select child_id from childs) and state in (''PENDING'', ''RESCHEDULE'')\n\treturning techo_notification_master.id\n), update_event as (\n\tupdate event_mobile_notification_pending set is_completed = true, state = ''MARK_AS_MIGRATED_PENDING'', \n\tmodified_by = #created_by#, modified_on = now() from event_mobile_configuration \n\twhere event_mobile_notification_pending.notification_configuration_type_id = event_mobile_configuration.id \n\tand member_id in (select child_id from childs) and state = ''PENDING''\n\treturning event_mobile_notification_pending.id\n)\nupdate imt_member set state = ''com.argusoft.imtecho.member.state.migrated'', \nmodified_on = now(), modified_by = #created_by# where imt_member.id in (select child_id from childs);","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id,id,created_by","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":56,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null}]},{"isConditionReq":true,"condition":"#out_of_state# == true","conditionParam":"out_of_state","description":null,"notificaitonConfigsType":[{"id":"fe1f0b8a-3102-461d-92fc-a4aa3390b286","type":"QUERY","template":"update techo_notification_master set state = case when state = ''PENDING'' then ''MARK_AS_MIGRATED_PENDING'' \n\twhen state = ''RESCHEDULE'' then ''MARK_AS_MIGRATED_RESCHEDULE'' end, \nmodified_on = now(), modified_by = #created_by# \nwhere member_id = #member_id# and state in (''PENDING'', ''RESCHEDULE'');\n\nupdate event_mobile_notification_pending set is_completed = true, state = ''MARK_AS_MIGRATED_PENDING'', \nmodified_by = #created_by#, modified_on = now() from event_mobile_configuration \nwhere event_mobile_notification_pending.notification_configuration_type_id = event_mobile_configuration.id \nand member_id = #member_id# and state = ''PENDING'';\n\nupdate imt_member set state = ''com.argusoft.imtecho.member.state.migrated.outofstate'', \nmodified_on = now(), modified_by = #created_by# where imt_member.id = #member_id#;\n\nwith childs as (\n\tselect child_id from migration_child_rel where migration_id = #id#\n), update_notifications as (\n\tupdate techo_notification_master set state = case when state = ''PENDING'' then ''MARK_AS_MIGRATED_PENDING'' \n\t\twhen state = ''RESCHEDULE'' then ''MARK_AS_MIGRATED_RESCHEDULE'' end, \n\tmodified_on = now(), modified_by = #created_by# \n\twhere member_id in (select child_id from childs) and state in (''PENDING'', ''RESCHEDULE'')\n\treturning techo_notification_master.id\n), update_event as (\n\tupdate event_mobile_notification_pending set is_completed = true, state = ''MARK_AS_MIGRATED_PENDING'', \n\tmodified_by = #created_by#, modified_on = now() from event_mobile_configuration \n\twhere event_mobile_notification_pending.notification_configuration_type_id = event_mobile_configuration.id \n\tand member_id in (select child_id from childs) and state = ''PENDING''\n\treturning event_mobile_notification_pending.id\n)\nupdate imt_member set state = ''com.argusoft.imtecho.member.state.migrated.outofstate'', \nmodified_on = now(), modified_by = #created_by# where imt_member.id in (select child_id from childs);","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id,id,created_by","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":56,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null}]}]}]','ACTIVE',NULL,'MIG_OUT','4013a91e-c532-43ff-ad6b-8adfe0237f63'),
	 (114,74840,'2020-03-16 12:07:55.125',1,'2021-01-13 20:22:06.427965',NULL,NULL,'FORM_SUBMITTED',NULL,93,NULL,NULL,'CFHC confirmed widget','[{"query":"select \ntecho_web_notification_master.id as web_notification_id,\ntecho_web_notification_master.modified_by as action_by,\nlistvalue_field_value_detail.value as selected_action,\ntecho_web_notification_master.ref_code\nfrom techo_web_notification_master\n,listvalue_field_value_detail\nwhere techo_web_notification_master.id  = #resourceId#\nand cast(techo_web_notification_master.action_taken as integer) =  listvalue_field_value_detail.id","queryParam":"resourceId","conditions":[{"isConditionReq":true,"condition":"\"#selected_action#\" == \"Confirmed\"","conditionParam":"selected_action","description":null,"notificaitonConfigsType":[{"id":"01c7fcc3-b547-4897-b5a3-a564d7ee3bf1","type":"QUERY","template":"update techo_web_notification_master set state = ''PENDING'' where id = #web_notification_id#","mobileNotificationType":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"web_notification_id","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":114,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null}]},{"isConditionReq":false,"condition":null,"conditionParam":null,"description":null,"notificaitonConfigsType":[{"id":"0249a924-e8c7-4778-b9bf-a442860a92f9","type":"QUERY","template":"update wt_cfhc_suspected_disease set status = ''#selected_action#'',modified_by = #action_by# where id = #ref_code#","mobileNotificationType":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"selected_action,action_by,ref_code","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":114,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null}]}]}]','ACTIVE',NULL,'cfhc_confirm_disease','c0b0252e-f176-451e-9c88-dc18cd5bb871'),
	 (57,58981,'2019-04-02 11:23:32.134',1,'2021-01-13 20:22:06.427965',NULL,NULL,'FORM_SUBMITTED',NULL,41,NULL,NULL,'Migration In Confirmation Event','[{"query":"select id, member_id, state, area_migrated_to, location_migrated_to, family_migrated_to, modified_by\nfrom migration_master where id = #resourceId#;","queryParam":"resourceId","conditions":[{"isConditionReq":true,"condition":"''#state#'' == ''NOT_HAPPEN'' || ''#state#'' == ''NO_RESPONSE''","conditionParam":"state","description":null,"notificaitonConfigsType":[{"id":"4fc0bf75-cf1f-45b0-9645-840e996e5781","type":"QUERY","template":"update techo_notification_master set \nstate = case when state = ''MARK_AS_MIGRATED_PENDING'' then ''PENDING'' \n\twhen state = ''MARK_AS_MIGRATED_RESCHEDULE'' then ''RESCHEDULE'' end, \nmodified_on = now(), modified_by = #modified_by# \nwhere member_id = #member_id# and state in (''MARK_AS_MIGRATED_PENDING'', ''MARK_AS_MIGRATED_RESCHEDULE'');\n\nupdate event_mobile_notification_pending set is_completed = false, state = ''PENDING'', \nmodified_by = #modified_by#, modified_on = now() from event_mobile_configuration \nwhere event_mobile_notification_pending.notification_configuration_type_id = event_mobile_configuration.id \nand member_id = #member_id# and state = ''MARK_AS_MIGRATED_PENDING'';\n\nupdate imt_member set state = (\n\tselect from_state from imt_member_state_detail where member_id = #member_id#\n\tand from_state not in (\n\t\t''com.argusoft.imtecho.member.state.migrated'',\n\t\t''com.argusoft.imtecho.member.state.migrated.outofstate'',\n\t\t''com.argusoft.imtecho.member.state.migrated.lfu''\n\t) order by id desc limit 1\n), \nmodified_on = now(), modified_by = #modified_by# where imt_member.id = #member_id#;\n\nwith childs as(\n\tselect child_id from migration_child_rel where migration_id = #id#\n), update_notifications as (\n\tupdate techo_notification_master set \n\tstate = case when state = ''MARK_AS_MIGRATED_PENDING'' then ''PENDING'' \n\t\twhen state = ''MARK_AS_MIGRATED_RESCHEDULE'' then ''RESCHEDULE'' end, \n\tmodified_on = now(), modified_by = #modified_by# \n\twhere member_id in (select child_id from childs) and state in (''MARK_AS_MIGRATED_PENDING'', ''MARK_AS_MIGRATED_RESCHEDULE'')\n\treturning techo_notification_master.id\n), update_event as (\n\tupdate event_mobile_notification_pending set is_completed = false, state = ''PENDING'', \n\tmodified_by = #modified_by#, modified_on = now() from event_mobile_configuration \n\twhere event_mobile_notification_pending.notification_configuration_type_id = event_mobile_configuration.id \n\tand member_id in (select child_id from childs) and state = ''MARK_AS_MIGRATED_PENDING''\n\treturning event_mobile_notification_pending.id\n), max_states as (\n\tselect sd.member_id, max(id) from imt_member_state_detail sd\n\twhere member_id in (select child_id from childs) \n\tand sd.from_state not in (\n\t\t''com.argusoft.imtecho.member.state.migrated'',\n\t\t''com.argusoft.imtecho.member.state.migrated.outofstate'',\n\t\t''com.argusoft.imtecho.member.state.migrated.lfu''\n\t) \n\tgroup by sd.member_id\n), from_states as (\n\tselect member_id, from_state \n\tfrom imt_member_state_detail imsd\n\twhere id in (select max from max_states)\n)\nupdate imt_member set modified_on = now(), modified_by = #modified_by#,\nstate = from_states.from_state\nfrom from_states\nwhere imt_member.id = from_states.member_id","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id,modified_by,id","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":57,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null}]},{"isConditionReq":true,"condition":"''#state#'' == ''CONFIRMED''","conditionParam":"state","description":null,"notificaitonConfigsType":[{"id":"7d65e6b4-116a-4599-aac9-11ef7037d936","type":"QUERY","template":"update techo_notification_master set \nfamily_id = (select id from imt_family where family_id = ''#family_migrated_to#''), \nstate = case when state = ''MARK_AS_MIGRATED_PENDING'' then ''PENDING'' \n\twhen state = ''MARK_AS_MIGRATED_RESCHEDULE'' then ''RESCHEDULE'' end, \nmodified_on = now(), modified_by = #modified_by# \nwhere member_id = #member_id# and state in (''MARK_AS_MIGRATED_PENDING'', ''MARK_AS_MIGRATED_RESCHEDULE'');\n\nupdate event_mobile_notification_pending set is_completed = false, state = ''PENDING'', \nfamily_id = (select id from imt_family where family_id = ''#family_migrated_to#''), \nmodified_by = #modified_by#, modified_on = now() from event_mobile_configuration \nwhere event_mobile_notification_pending.notification_configuration_type_id = event_mobile_configuration.id \nand member_id = #member_id# and state = ''MARK_AS_MIGRATED_PENDING'';\n\nupdate imt_member set state = (\n\tselect from_state from imt_member_state_detail where member_id = #member_id#\n\tand from_state not in (\n\t\t''com.argusoft.imtecho.member.state.migrated'',\n\t\t''com.argusoft.imtecho.member.state.migrated.outofstate'',\n\t\t''com.argusoft.imtecho.member.state.migrated.lfu''\n\t) order by id desc limit 1\n),  \nfamily_id = ''#family_migrated_to#'', modified_on = now(), modified_by = #modified_by# \nwhere imt_member.id = #member_id#;\n\nwith childs as(\n\tselect child_id from migration_child_rel where migration_id = #id#\n), update_notifications as (\n\tupdate techo_notification_master set \n\tfamily_id = (select id from imt_family where family_id = ''#family_migrated_to#''), \n\tstate = case when state = ''MARK_AS_MIGRATED_PENDING'' then ''PENDING'' \n\t\twhen state = ''MARK_AS_MIGRATED_RESCHEDULE'' then ''RESCHEDULE'' end, \n\tmodified_on = now(), modified_by = #modified_by# \n\twhere member_id in (select child_id from childs) and state in (''MARK_AS_MIGRATED_PENDING'', ''MARK_AS_MIGRATED_RESCHEDULE'')\n\treturning techo_notification_master.id\n), update_event as (\n\tupdate event_mobile_notification_pending set is_completed = false, state = ''PENDING'', \n\tfamily_id = (select id from imt_family where family_id = ''#family_migrated_to#''), \n\tmodified_by = #modified_by#, modified_on = now() from event_mobile_configuration \n\twhere event_mobile_notification_pending.notification_configuration_type_id = event_mobile_configuration.id \n\tand member_id in (select child_id from childs) and state = ''MARK_AS_MIGRATED_PENDING''\n\treturning event_mobile_notification_pending.id\n), max_states as (\n\tselect sd.member_id, max(id) from imt_member_state_detail sd\n\twhere member_id in (select child_id from childs) \n\tand sd.from_state not in (\n\t\t''com.argusoft.imtecho.member.state.migrated'',\n\t\t''com.argusoft.imtecho.member.state.migrated.outofstate'',\n\t\t''com.argusoft.imtecho.member.state.migrated.lfu''\n\t) \n\tgroup by sd.member_id\n), from_states as (\n\tselect member_id, from_state \n\tfrom imt_member_state_detail imsd\n\twhere id in (select max from max_states)\n)\nupdate imt_member set family_id = ''#family_migrated_to#'', \nmodified_on = now(), modified_by = #modified_by#, \nstate = from_states.from_state\nfrom from_states\nwhere imt_member.id = from_states.member_id","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id,modified_by,family_migrated_to,id","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":57,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null}]}]}]','ACTIVE',NULL,'MIG_IN_CONF','5e2af9a8-f2a0-479b-be9d-2b22e27c837e'),
	 (20,409,'2018-07-06 15:10:39.585',1,'2021-01-13 20:22:06.427965',NULL,NULL,'FORM_SUBMITTED',NULL,5,NULL,NULL,'Child service','[{"query":"select cs.id, case when f.area_id is null then f.location_id else f.area_id end as area_id, \ncs.member_id, cs.family_id, cs.location_id, notification_id, cs.created_by, \ncase when cs.service_date is null then to_char(current_date, ''MM/DD/YYYY'') else to_char(cs.service_date, ''MM/DD/YYYY'') end as service_date,\nany_vaccination_pending, cs.weight, cs.height, mid_arm_circumference, sd_score, have_pedal_edema, \ncs.complementary_feeding_started, cs.member_status,\nto_char(cs.death_date,''MM/DD/YYYY'') as death_date,\ncs.death_reason, cs.other_death_reason, cs.place_of_death, cs.death_infra_id\nfrom rch_child_service_master cs, imt_member m, imt_family f\nwhere cs.id= #resourceId# and m.id = cs.member_id and m.family_id = f.family_id;","queryParam":"resourceId","conditions":[{"isConditionReq":true,"condition":"#any_vaccination_pending# != true","conditionParam":"any_vaccination_pending","description":null,"notificaitonConfigsType":[{"id":"60e4ed87-927a-4d6b-a615-2af91846fbb4","type":"QUERY","template":null,"mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":null,"baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":20,"queryMasterId":null,"queryCode":"mob_notification_mark_as_complete","queryMasterParamJson":[{"parameterName":"action_by","mappingValue":"created_by","isFixed":false},{"parameterName":"notification_id","mappingValue":"notification_id","isFixed":false}],"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null},{"id":"a235ce82-6490-41f1-88c8-ba9787ef38af","type":"QUERY","template":"update techo_notification_master set state = ''COMPLETED'', action_by = #created_by#, modified_on = now()\nwhere member_id = #member_id# and state in (''PENDING'',''RESCHEDULE'')\nand notification_type_id = (select id from notification_type_master where code = ''FHW_CS'');","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id,created_by","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":20,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null}]},{"isConditionReq":true,"condition":"#weight# != null || #complementary_feeding_started# != null","conditionParam":"weight,complementary_feeding_started","description":null,"notificaitonConfigsType":[{"id":"4cd86503-4da8-4c63-b31d-7d9ac82216fe","type":"QUERY","template":"update imt_member set weight = (case when #weight# is not null then #weight# else weight end),\ncomplementary_feeding_started = (case when #complementary_feeding_started# is not null then #complementary_feeding_started# else complementary_feeding_started end) \nwhere id = #member_id#","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id,weight,complementary_feeding_started","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":20,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null}]},{"isConditionReq":true,"condition":"(#mid_arm_circumference# != null && #mid_arm_circumference# < 11.5) || (#have_pedal_edema# != null && #have_pedal_edema# == true) || ( ''#sd_score#''  != ''null'' && (''#sd_score#'' == ''SD3'' || ''#sd_score#'' == ''SD4''))","conditionParam":"have_pedal_edema,sd_score,mid_arm_circumference","description":"To generate Appetite Test Alert For Child","notificaitonConfigsType":[{"id":"c4e1557e-0be7-4fb1-ac2e-85e90e976f6c","type":"QUERY","template":"update techo_notification_master set state = ''DONE_ON_CS'', modified_by = #created_by#, modified_on = now() \nwhere member_id = #member_id# and state = ''PENDING'' and notification_type_id = (select id from notification_type_master where code = ''SAM_SCREENING'');","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id,created_by","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":20,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null},{"id":"efbe5cba-7e7a-48c1-8c48-63e58725cf83","type":"QUERY","template":"with sam as (\n\tinsert into child_nutrition_sam_screening_master (\n\t\tmember_id, family_id, location_id, height, weight, sd_score, muac, have_pedal_edema, \n\t\tcreated_by, created_on, modified_by, modified_on, service_date, done_from, done_by, reference_id \n\t) \n\tselect #member_id#, #family_id#, #area_id#, #height#, #weight#, ''#sd_score#'', #mid_arm_circumference#, #have_pedal_edema#, #created_by#, \n\tnow(), #created_by#, now(), ''#service_date#'',''FHW_CS'', #created_by#, #id# returning id \n) \ninsert into techo_notification_master (\n\tmember_id, family_id, location_id, notification_type_id, notification_code, \n\tschedule_date, due_on, expiry_date, state, created_by, created_on, modified_by, modified_on, related_id\n) \nselect #member_id#, #family_id#, #location_id#, id, case when #have_pedal_edema# = true then ''1'' else ''0'' end, \nnow(), now() + interval ''3 days'', null, ''PENDING'', #created_by#, now(), #created_by#, now(), \n(select id from sam) from notification_type_master where code = ''APPETITE'';","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id,sd_score,have_pedal_edema,family_id,mid_arm_circumference,service_date,weight,id,area_id,created_by,location_id,height","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":20,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null}]},{"isConditionReq":true,"condition":"''#member_status#'' == ''DEATH''","conditionParam":"member_status","description":null,"notificaitonConfigsType":[{"id":"dc515892-2091-4951-b569-322099060daf","type":"QUERY","template":null,"mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":null,"baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":20,"queryMasterId":null,"queryCode":"mark_member_as_death","queryMasterParamJson":[{"parameterName":"member_id","mappingValue":"member_id","isFixed":false},{"parameterName":"action_by","mappingValue":"created_by","isFixed":false},{"parameterName":"family_id","mappingValue":"family_id","isFixed":false},{"parameterName":"service_type","mappingValue":"FHW_CS","isFixed":true},{"parameterName":"reference_id","mappingValue":"id","isFixed":false},{"parameterName":"death_reason","mappingValue":"death_reason","isFixed":false},{"parameterName":"other_death_reason","mappingValue":"other_death_reason","isFixed":false},{"parameterName":"place_of_death","mappingValue":"place_of_death","isFixed":false},{"parameterName":"location_id","mappingValue":"location_id","isFixed":false},{"parameterName":"death_date","mappingValue":"death_date","isFixed":false},{"parameterName":"health_infra_id","mappingValue":"death_infra_id","isFixed":false}],"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null}]},{"isConditionReq":true,"condition":"#any_vaccination_pending# == false || #any_vaccination_pending# == null","conditionParam":"any_vaccination_pending","description":null,"notificaitonConfigsType":[{"id":"a506206e-495b-4d8d-9637-3335e4f7bb58","type":"QUERY","template":"update techo_notification_master set modified_on = now() where id = #notification_id#","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"notification_id","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":20,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null}]}]}]','ACTIVE',NULL,'FHW_CS','bbbcf2b8-8a6b-4975-b510-c98c6fa04f34'),
	 (82,58981,'2019-09-13 18:29:34.685',1,'2021-01-13 20:22:06.427965',NULL,NULL,'FORM_SUBMITTED',NULL,70,NULL,NULL,'Asha ANC Service Visit','[{"query":"select id, service_date, member_id, family_id, location_id,\ndeath_date, death_place, death_reason, other_death_reason,\nmember_status, is_alive, notification_id, created_by\nfrom rch_asha_anc_master where id = #resourceId#","queryParam":"resourceId","conditions":[{"isConditionReq":true,"condition":"#notification_id# != null","conditionParam":"notification_id","description":null,"notificaitonConfigsType":[{"id":"a9e793fe-c323-45ae-a074-194b05905163","type":"QUERY","template":null,"mobileNotificationType":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":null,"baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":82,"queryMasterId":null,"queryCode":"mob_notification_mark_as_complete","queryMasterParamJson":[{"parameterName":"action_by","mappingValue":"created_by","isFixed":false},{"parameterName":"notification_id","mappingValue":"notification_id","isFixed":false}],"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null}]},{"isConditionReq":false,"condition":null,"conditionParam":null,"description":null,"notificaitonConfigsType":[{"id":"5854e6f1-65cd-485b-b36c-6c4144d64ffd","type":"QUERY","template":"update techo_notification_master set state = ''COMPLETED'', action_by = #created_by#, modified_on = now()\nwhere member_id = #member_id# and state in (''PENDING'',''RESCHEDULE'') \nand notification_type_id = (select id from notification_type_master where code = ''ASHA_ANC'')","mobileNotificationType":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id,created_by","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":82,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null}]}]}]','ACTIVE',NULL,'ASHA_ANC','9d8c0bba-76fd-4203-a837-b0957ca47a9b'),
	 (21,58251,'2018-08-07 11:20:25.425',1,'2021-01-13 20:22:06.427965',NULL,NULL,'FORM_SUBMITTED',NULL,7,NULL,NULL,'RIM Visit','[{"query":"select id, menopause_arrived, hysterectomy_done, modified_by  from imt_member where id = ''#resourceId#''","queryParam":"resourceId","conditions":[{"isConditionReq":true,"condition":"''#menopause_arrived#'' != ''null'' && ''#menopause_arrived#'' == ''true''","conditionParam":"menopause_arrived","description":null,"notificaitonConfigsType":[{"id":"e9208e36-3610-47f5-a396-de9d27d11330","type":"QUERY","template":"update techo_notification_master set state = ''MARK_AS_MENOPAUSE_ARRIVED'', action_by = ''#modified_by#'', modified_by = ''#modified_by#'', modified_on = now() where member_id = ''#id#'' and state = ''PENDING''","mobileNotificationType":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"modified_by,id","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":21,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null}]},{"isConditionReq":true,"condition":"''#hysterectomy_done#'' != ''null'' && ''#hysterectomy_done#'' == ''true''","conditionParam":"hysterectomy_done","description":null,"notificaitonConfigsType":[{"id":"504a1dda-a40b-4157-9ac5-b61be5b70e86","type":"QUERY","template":"update techo_notification_master set state = ''MARK_AS_HYSTERECTOMY_DONE'', action_by = ''#modified_by#'', modified_by = ''#modified_by#'', modified_on = now() where member_id = ''#id#'' and state = ''PENDING''","mobileNotificationType":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"modified_by,id","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":21,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null}]}]}]','ACTIVE',NULL,'FHW_RIM','b88ef06d-e38e-4ec0-aea4-c4f2f0e0fd37'),
	 (30,58981,'2018-09-08 19:34:43.452',1,'2021-01-13 20:22:06.427965',NULL,NULL,'FORM_SUBMITTED',NULL,10,NULL,NULL,'Migration Out Request','[{"query":"select member_id, location_migrated_to, location_migrated_from, type, state, family_migrated_from, family_migrated_to, modified_by from migration_master where id = #resourceId#","queryParam":"resourceId","conditions":[{"isConditionReq":false,"condition":null,"conditionParam":null,"description":null,"notificaitonConfigsType":[{"id":"fbf1b41d-4318-454a-bcdc-cc1249e372a0","type":"QUERY","template":"update techo_notification_master set state = case when state = ''PENDING'' then ''MARK_AS_MIGRATED_PENDING'' \n\twhen state = ''RESCHEDULE'' then ''MARK_AS_MIGRATED_RESCHEDULE'' end, \nmodified_on = now(), modified_by = #modified_by# \nwhere member_id = #member_id# and state in (''PENDING'', ''RESCHEDULE'');\n\nupdate event_mobile_notification_pending set is_completed = true, state = ''MARK_AS_MIGRATED_PENDING'', \nmodified_by = #modified_by#, modified_on = now() from event_mobile_configuration \nwhere member_id = #member_id# and state = ''PENDING'';\n\nwith rows as(\n\tINSERT INTO imt_member_state_detail(member_id, from_state, to_state, created_by, created_on, modified_by, modified_on)\n\tVALUES(#member_id#, (select state from imt_member where id = #member_id#), \n\t\t''com.argusoft.imtecho.member.state.migrated'',\n\t\t#modified_by#, now(), #modified_by#, now()) RETURNING id)\nupdate imt_member set current_state = (select id from rows), state = ''com.argusoft.imtecho.member.state.migrated'', \nmodified_on = now(), modified_by = #modified_by# where imt_member.id = #member_id#;","mobileNotificationType":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id,modified_by","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":30,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null}]}]}]','INACTIVE',NULL,'MIGRATION_OUT_REQ','7dcd84eb-8882-4160-a399-1481b79d9346'),
	 (22,409,'2018-06-15 16:45:44.8',58981,'2021-01-19 17:17:47.308',NULL,NULL,'FORM_SUBMITTED',NULL,4,NULL,NULL,'PNC form configure','[{"query":"select rch_pnc_mother_master.id, rch_pnc_master.family_id, rch_pnc_mother_master.mother_id as member_id, \n(case when imt_family.area_id is null then imt_family.location_id else cast(imt_family.area_id as integer) end) as location_id, \nrch_pnc_master.notification_id, rch_pnc_mother_master.family_planning_method as last_method_of_contraception, \nto_char(rch_pnc_mother_master.fp_insert_operate_date, ''MM/DD/YYYY'') as fp_insert_operate_date,\nrch_pnc_mother_master.is_high_risk_case, to_char(rch_pnc_mother_master.death_date,''MM/DD/YYYY'') as death_date, \ndeath_reason, place_of_death, other_death_reason, death_infra_id, rch_pnc_master.created_by \nfrom rch_pnc_master left join rch_pnc_mother_master on rch_pnc_master.id = rch_pnc_mother_master.pnc_master_id \ninner join imt_member on rch_pnc_mother_master.mother_id = imt_member.id \ninner join imt_family on rch_pnc_master.family_id = imt_family.id \nwhere rch_pnc_master.id = #resourceId#;","queryParam":"resourceId","conditions":[{"isConditionReq":false,"condition":null,"conditionParam":null,"description":null,"notificaitonConfigsType":[{"id":"03dd06fc-e948-4606-8d2f-9589ee2951e4","type":"QUERY","template":null,"mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":null,"baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":22,"queryMasterId":53,"queryCode":"mob_notification_mark_as_complete","queryMasterParamJson":[{"parameterName":"action_by","mappingValue":"created_by","isFixed":false},{"parameterName":"notification_id","mappingValue":"notification_id","isFixed":false}],"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null},{"id":"52f83323-4d51-4f39-b7f6-f4517c32f761","type":"QUERY","template":"update techo_notification_master set state = ''COMPLETED'', action_by = #created_by#, modified_on = now()\nwhere member_id = #member_id# and state in (''PENDING'',''RESCHEDULE'') \nand notification_type_id = (select id from notification_type_master where code = ''FHW_PNC'');","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id,created_by","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":22,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null}]},{"isConditionReq":true,"condition":"''#last_method_of_contraception#'' != ''null'' || ''#is_high_risk_case#'' != ''null'' || ''#fp_insert_operate_date#'' != ''null''","conditionParam":"is_high_risk_case,last_method_of_contraception,fp_insert_operate_date","description":"","notificaitonConfigsType":[{"id":"a10f47d4-8ef6-45fb-a172-502dff6eb72f","type":"QUERY","template":"update imt_member set modified_on = now(), modified_by = #created_by#, \nlast_method_of_contraception = case when ''#last_method_of_contraception#'' != ''null'' then ''#last_method_of_contraception#'' else last_method_of_contraception end,\nfp_insert_operate_date = (\n\tcase when ''#fp_insert_operate_date#'' != ''null'' \n\t\tthen to_date(case when ''#fp_insert_operate_date#'' = ''null'' then ''1970-01-01'' else ''#fp_insert_operate_date#'' end, ''MM/DD/YYYY'') \n\t\telse fp_insert_operate_date end),\nis_high_risk_case = case when ''#is_high_risk_case#'' != ''null'' then #is_high_risk_case# else is_high_risk_case end \nwhere id = #member_id# ;","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id,is_high_risk_case,last_method_of_contraception,fp_insert_operate_date,created_by","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":22,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null}]},{"isConditionReq":true,"condition":"''#death_date#'' != ''null''","conditionParam":"death_date","description":null,"notificaitonConfigsType":[{"id":"1e1ce0f2-b31c-42b2-bc64-b1441d27f9de","type":"QUERY","template":null,"mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":null,"baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":22,"queryMasterId":56,"queryCode":"mark_member_as_death","queryMasterParamJson":[{"parameterName":"member_id","mappingValue":"member_id","isFixed":false},{"parameterName":"action_by","mappingValue":"created_by","isFixed":false},{"parameterName":"family_id","mappingValue":"family_id","isFixed":false},{"parameterName":"service_type","mappingValue":"FHW_PNC_MOTHER","isFixed":true},{"parameterName":"reference_id","mappingValue":"id","isFixed":false},{"parameterName":"death_reason","mappingValue":"death_reason","isFixed":false},{"parameterName":"other_death_reason","mappingValue":"other_death_reason","isFixed":false},{"parameterName":"place_of_death","mappingValue":"place_of_death","isFixed":false},{"parameterName":"location_id","mappingValue":"location_id","isFixed":false},{"parameterName":"death_date","mappingValue":"death_date","isFixed":false},{"parameterName":"health_infra_id","mappingValue":"death_infra_id","isFixed":false}],"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null}]}]},{"query":"select rch_pnc_child_master.id, rch_pnc_master.family_id, rch_pnc_child_master.child_id as member_id, \n(case when imt_family.area_id is null then imt_family.location_id else cast(imt_family.area_id as integer) end) as location_id, \nto_char(death_date,''MM/DD/YYYY'') as death_date, -1 as death_infra_id,\nrch_pnc_child_master.death_reason, rch_pnc_child_master.place_of_death, other_death_reason, \nrch_pnc_child_master.is_high_risk_case, rch_pnc_master.created_by \nfrom rch_pnc_master inner join rch_pnc_child_master on rch_pnc_master.id = rch_pnc_child_master.pnc_master_id \ninner join imt_member on rch_pnc_child_master.child_id = imt_member.id \ninner join imt_family on rch_pnc_master.family_id = imt_family.id \nwhere rch_pnc_master.id = #resourceId#;","queryParam":"resourceId","conditions":[{"isConditionReq":true,"condition":"''#death_date#'' != ''null''","conditionParam":"death_date","description":null,"notificaitonConfigsType":[{"id":"7f43d8ea-e4bb-4ae6-a0ff-78ba38c60e77","type":"QUERY","template":null,"mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":null,"baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":22,"queryMasterId":56,"queryCode":"mark_member_as_death","queryMasterParamJson":[{"parameterName":"member_id","mappingValue":"member_id","isFixed":false},{"parameterName":"action_by","mappingValue":"created_by","isFixed":false},{"parameterName":"family_id","mappingValue":null,"isFixed":false},{"parameterName":"service_type","mappingValue":"FHW_PNC_CHILD","isFixed":true},{"parameterName":"reference_id","mappingValue":"id","isFixed":false},{"parameterName":"death_reason","mappingValue":"death_reason","isFixed":false},{"parameterName":"other_death_reason","mappingValue":"other_death_reason","isFixed":false},{"parameterName":"place_of_death","mappingValue":"place_of_death","isFixed":false},{"parameterName":"location_id","mappingValue":"location_id","isFixed":false},{"parameterName":"death_date","mappingValue":"death_date","isFixed":false},{"parameterName":"health_infra_id","mappingValue":"death_infra_id","isFixed":false}],"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null}]},{"isConditionReq":true,"condition":"''#is_high_risk_case#'' != ''null''","conditionParam":"is_high_risk_case","description":null,"notificaitonConfigsType":[{"id":"03f7ce57-3580-4012-a378-2ed8072214aa","type":"QUERY","template":"update imt_member set modified_on = now() , modified_by = #created_by#, is_high_risk_case = case when ''#is_high_risk_case#'' is not null then ''#is_high_risk_case#'' else is_high_risk_case end where id = #member_id#;","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id,is_high_risk_case,created_by","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":22,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null}]}]}]','ACTIVE',NULL,'FHW_PNC','453e82ce-479e-4f90-a070-6c43f3058f8f'),
	 (58,58981,'2019-04-02 11:24:22.596',1,'2021-01-13 20:22:06.427965',NULL,NULL,'FORM_SUBMITTED',NULL,42,NULL,NULL,'Migration Out Confirmation Event','[{"query":"select id, member_id, state, area_migrated_to, location_migrated_to, family_migrated_to, modified_by\nfrom migration_master where id = #resourceId#;","queryParam":"resourceId","conditions":[{"isConditionReq":true,"condition":"''#state#'' == ''CONFIRMED'' || ''#state#'' == ''NO_RESPONSE''","conditionParam":"state","description":null,"notificaitonConfigsType":[{"id":"7ace51c1-e7e2-4264-9593-aff740d468de","type":"QUERY","template":"update techo_notification_master set \nfamily_id = (select id from imt_family where family_id = ''#family_migrated_to#''), \nmodified_on = now(), modified_by = #modified_by# \nwhere member_id = #member_id# and state in (''PENDING'', ''RESCHEDULE'');\n\nupdate event_mobile_notification_pending set\nfamily_id = (select id from imt_family where family_id = ''#family_migrated_to#''), \nmodified_by = #modified_by#, modified_on = now() from event_mobile_configuration \nwhere event_mobile_notification_pending.notification_configuration_type_id = event_mobile_configuration.id \nand member_id = #member_id# and state = ''PENDING'';\n\nupdate imt_member set family_id = ''#family_migrated_to#'', \nmodified_on = now(), modified_by = #modified_by# where imt_member.id = #member_id#;\n\nwith childs as (\n\tselect child_id from migration_child_rel where migration_id = #id#\n), update_notifications as (\n\tupdate techo_notification_master set \n\tfamily_id = (select id from imt_family where family_id = ''#family_migrated_to#''), \n\tmodified_on = now(), modified_by = #modified_by# \n\twhere member_id in (select child_id from childs) and state in (''PENDING'', ''RESCHEDULE'')\n\treturning techo_notification_master.id\n), update_event as (\n\tupdate event_mobile_notification_pending set\n\tfamily_id = (select id from imt_family where family_id = ''#family_migrated_to#''), \n\tmodified_by = #modified_by#, modified_on = now() from event_mobile_configuration \n\twhere event_mobile_notification_pending.notification_configuration_type_id = event_mobile_configuration.id \n\tand member_id in (select child_id from childs) and state = ''PENDING''\n\treturning event_mobile_notification_pending.id\n)\nupdate imt_member set family_id = ''#family_migrated_to#'', \nmodified_on = now(), modified_by = #modified_by# where imt_member.id in (select child_id from childs);","mobileNotificationType":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id,modified_by,family_migrated_to,id","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":58,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null}]}]}]','ACTIVE',NULL,'MIG_OUT_CONF','28ebe071-5d8c-492f-8138-d2700f2de9de'),
	 (59,58981,'2019-04-02 11:42:57.516',1,'2021-01-13 20:22:06.427965',NULL,NULL,'FORM_SUBMITTED',NULL,43,NULL,NULL,'Revert Migration','[{"query":"select id, member_id, type, no_family, is_temporary, out_of_state, area_migrated_from, location_migrated_from, state, family_migrated_from, modified_by, reported_on from migration_master where id = #resourceId#;","queryParam":"resourceId","conditions":[{"isConditionReq":true,"condition":"#out_of_state# == false && ''#type#'' == ''IN'' && #is_temporary# == false","conditionParam":"out_of_state,is_temporary,type","description":null,"notificaitonConfigsType":[{"id":"4ca64dcd-0b5d-4326-af82-facab897d8a7","type":"QUERY","template":"update techo_notification_master set state = ''MARK_AS_MIGRATION_REVERT'', \nmodified_on = now(), modified_by = #modified_by# \nwhere member_id = #member_id# and state in (''PENDING'', ''RESCHEDULE'') \nand notification_type_id in (select id from notification_type_master where code in (''MI'',''MO''))\nand migration_id = #id#;\n\nupdate techo_notification_master set \nfamily_id = (select id from imt_family where family_id = ''#family_migrated_from#''), \nmodified_on = now(), modified_by = #modified_by# \nwhere member_id = #member_id# and state in (''PENDING'', ''RESCHEDULE'');\n\nupdate event_mobile_notification_pending set\nfamily_id = (select id from imt_family where family_id = ''#family_migrated_from#''), \nmodified_by = #modified_by#, modified_on = now() from event_mobile_configuration \nwhere event_mobile_notification_pending.notification_configuration_type_id = event_mobile_configuration.id \nand member_id = #member_id# and state = ''PENDING'';\n\nupdate imt_member set family_id = ''#family_migrated_from#'', \nmodified_on = now(), modified_by = #modified_by#,\nstate = (\n\tselect from_state from imt_member_state_detail where member_id = #member_id#\n\tand from_state not in (\n\t\t''com.argusoft.imtecho.member.state.migrated'',\n\t\t''com.argusoft.imtecho.member.state.migrated.outofstate'',\n\t\t''com.argusoft.imtecho.member.state.migrated.lfu''\n\t) order by id desc limit 1\n)\nwhere imt_member.id = #member_id#;\n\nwith childs as (\n\tselect child_id from migration_child_rel where migration_id = #id#\n    union\n    select id from imt_member where mother_id = #member_id# and dob > ''#reported_on#''\n), update_notifications as (\n\tupdate techo_notification_master set \n\tfamily_id = (select id from imt_family where family_id = ''#family_migrated_from#''), \n\tmodified_on = now(), modified_by = #modified_by# \n\twhere member_id in (select child_id from childs) and state in (''PENDING'', ''RESCHEDULE'')\n\treturning techo_notification_master.id\n), update_event as (\n\tupdate event_mobile_notification_pending set\n\tfamily_id = (select id from imt_family where family_id = ''#family_migrated_from#''), \n\tmodified_by = #modified_by#, modified_on = now() from event_mobile_configuration \n\twhere event_mobile_notification_pending.notification_configuration_type_id = event_mobile_configuration.id \n\tand member_id in (select child_id from childs) and state = ''PENDING''\n\treturning event_mobile_notification_pending.id\n), max_states as (\n\tselect sd.member_id, max(id) from imt_member_state_detail sd\n\twhere member_id in (select child_id from childs) \n\tand sd.from_state not in (\n\t\t''com.argusoft.imtecho.member.state.migrated'',\n\t\t''com.argusoft.imtecho.member.state.migrated.outofstate'',\n\t\t''com.argusoft.imtecho.member.state.migrated.lfu''\n\t) \n\tgroup by sd.member_id\n), from_states as (\n\tselect member_id, from_state \n\tfrom imt_member_state_detail imsd\n\twhere id in (select max from max_states)\n)\nupdate imt_member set family_id = ''#family_migrated_from#'', \nmodified_on = now(), modified_by = #modified_by#,\nstate = from_states.from_state\nfrom from_states\nwhere imt_member.id = from_states.member_id;","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id,reported_on,modified_by,id,family_migrated_from","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":59,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null}]},{"isConditionReq":true,"condition":"#out_of_state# == false && ''#type#'' == ''IN'' && #is_temporary# == true","conditionParam":"out_of_state,is_temporary,type","description":null,"notificaitonConfigsType":[{"id":"273c02a9-be99-4677-90f9-28b5db440341","type":"QUERY","template":"update techo_notification_master set state = ''MARK_AS_ARCHIVED'',\nmodified_on = now(), modified_by = #modified_by# \nwhere member_id = #member_id# and state in (''PENDING'', ''RESCHEDULE'');\n\nupdate event_mobile_notification_pending set state = ''MARK_AS_ARCHIVED'',\nmodified_by = #modified_by#, modified_on = now() from event_mobile_configuration \nwhere event_mobile_notification_pending.notification_configuration_type_id = event_mobile_configuration.id \nand member_id = #member_id# and state = ''PENDING'';\n\nupdate imt_member set state = ''com.argusoft.imtecho.member.state.archived'',\nmodified_on = now(), modified_by = #modified_by# where imt_member.id = #member_id#;\n\nwith childs as (\n\tselect child_id from migration_child_rel where migration_id = #id#\n        union\n        select id from imt_member where mother_id = #member_id# and dob > ''#reported_on#''\n), update_notifications as (\n\tupdate techo_notification_master set state = ''MARK_AS_ARCHIVED'',\n\tmodified_on = now(), modified_by = #modified_by# \n\twhere member_id in (select child_id from childs) and state in (''PENDING'', ''RESCHEDULE'')\n\treturning techo_notification_master.id\n), update_event as (\n\tupdate event_mobile_notification_pending set state = ''MARK_AS_ARCHIVED'', \n\tmodified_by = #modified_by#, modified_on = now() from event_mobile_configuration \n\twhere event_mobile_notification_pending.notification_configuration_type_id = event_mobile_configuration.id \n\tand member_id in (select child_id from childs) and state = ''PENDING''\n\treturning event_mobile_notification_pending.id\n)\nupdate imt_member set state = ''com.argusoft.imtecho.member.state.archived'',\nmodified_on = now(), modified_by = #modified_by# where imt_member.id in (select child_id from childs);\n\nupdate imt_family set modified_on = now(), modified_by = #modified_by#,\nstate = case when #no_family# = true then ''com.argusoft.imtecho.family.state.archived.temporary'' else state end\nwhere family_id = ''#family_migrated_to#'';","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id,no_family,reported_on,modified_by,id,family_migrated_to","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":59,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null}]},{"isConditionReq":true,"condition":"#out_of_state# == false && ''#type#'' == ''OUT''","conditionParam":"out_of_state,type","description":null,"notificaitonConfigsType":[{"id":"d30eaaa1-675a-49a7-a952-3d4d306140fb","type":"QUERY","template":"update techo_notification_master set state = ''MARK_AS_MIGRATION_REVERT'', \nmodified_on = now(), modified_by = #modified_by# \nwhere member_id = #member_id# and state in (''PENDING'', ''RESCHEDULE'') \nand notification_type_id in (select id from notification_type_master where code in (''MI'',''MO''))\nand migration_id = #id#;\n\nupdate techo_notification_master set \nfamily_id = (select id from imt_family where family_id = ''#family_migrated_from#''), \nmodified_on = now(), modified_by = #modified_by# \nwhere member_id = #member_id# and state in (''PENDING'', ''RESCHEDULE'');\n\nupdate event_mobile_notification_pending set\nfamily_id = (select id from imt_family where family_id = ''#family_migrated_from#''), \nmodified_by = #modified_by#, modified_on = now() from event_mobile_configuration \nwhere event_mobile_notification_pending.notification_configuration_type_id = event_mobile_configuration.id \nand member_id = #member_id# and state = ''PENDING'';\n\nupdate imt_member set family_id = ''#family_migrated_from#'', \nmodified_on = now(), modified_by = #modified_by#,\nstate = (\n\tselect from_state from imt_member_state_detail where member_id = #member_id#\n\tand from_state not in (\n\t\t''com.argusoft.imtecho.member.state.migrated'',\n\t\t''com.argusoft.imtecho.member.state.migrated.outofstate'',\n\t\t''com.argusoft.imtecho.member.state.migrated.lfu''\n\t) order by id desc limit 1\n)\nwhere imt_member.id = #member_id#;\n\nwith childs as (\n\tselect child_id from migration_child_rel where migration_id = #id#\n        union\n        select id from imt_member where mother_id = #member_id# and dob > ''#reported_on#''\n), update_notifications as (\n\tupdate techo_notification_master set \n\tfamily_id = (select id from imt_family where family_id = ''#family_migrated_from#''), \n\tmodified_on = now(), modified_by = #modified_by# \n\twhere member_id in (select child_id from childs) and state in (''PENDING'', ''RESCHEDULE'')\n\treturning techo_notification_master.id\n), update_event as (\n\tupdate event_mobile_notification_pending set\n\tfamily_id = (select id from imt_family where family_id = ''#family_migrated_from#''), \n\tmodified_by = #modified_by#, modified_on = now() from event_mobile_configuration \n\twhere event_mobile_notification_pending.notification_configuration_type_id = event_mobile_configuration.id \n\tand member_id in (select child_id from childs) and state = ''PENDING''\n\treturning event_mobile_notification_pending.id\n), max_states as (\n\tselect sd.member_id, max(id) from imt_member_state_detail sd\n\twhere member_id in (select child_id from childs) \n\tand sd.from_state not in (\n\t\t''com.argusoft.imtecho.member.state.migrated'',\n\t\t''com.argusoft.imtecho.member.state.migrated.outofstate'',\n\t\t''com.argusoft.imtecho.member.state.migrated.lfu''\n\t) \n\tgroup by sd.member_id\n), from_states as (\n\tselect member_id, from_state \n\tfrom imt_member_state_detail imsd\n\twhere id in (select max from max_states)\n)\nupdate imt_member set family_id = ''#family_migrated_from#'', \nmodified_on = now(), modified_by = #modified_by#,\nstate = from_states.from_state\nfrom from_states\nwhere imt_member.id = from_states.member_id;","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id,reported_on,modified_by,id,family_migrated_from","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":59,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null}]},{"isConditionReq":true,"condition":"#out_of_state# == true && ''#type#'' == ''IN''","conditionParam":"out_of_state,type","description":null,"notificaitonConfigsType":[{"id":"5260c608-e775-4b92-a306-65e37c6cab62","type":"QUERY","template":"update techo_notification_master set state = ''MARK_AS_OUT_OF_STATE'',\nmodified_on = now(), modified_by = #modified_by# \nwhere member_id = #member_id# and state in (''PENDING'', ''RESCHEDULE'');\n\nupdate event_mobile_notification_pending set state = ''MARK_AS_OUT_OF_STATE'',\nmodified_by = #modified_by#, modified_on = now() from event_mobile_configuration \nwhere event_mobile_notification_pending.notification_configuration_type_id = event_mobile_configuration.id \nand member_id = #member_id# and state = ''PENDING'';\n\nupdate imt_member set state = ''com.argusoft.imtecho.member.state.archived.outofstate'',\nmodified_on = now(), modified_by = #modified_by# where imt_member.id = #member_id#;\n\nwith childs as (\n\tselect child_id from migration_child_rel where migration_id = #id#\n        union\n        select id from imt_member where mother_id = #member_id# and dob > ''#reported_on#''\n), update_notifications as (\n\tupdate techo_notification_master set state = ''MARK_AS_OUT_OF_STATE'',\n\tmodified_on = now(), modified_by = #modified_by# \n\twhere member_id in (select child_id from childs) and state in (''PENDING'', ''RESCHEDULE'')\n\treturning techo_notification_master.id\n), update_event as (\n\tupdate event_mobile_notification_pending set state = ''MARK_AS_OUT_OF_STATE'', \n\tmodified_by = #modified_by#, modified_on = now() from event_mobile_configuration \n\twhere event_mobile_notification_pending.notification_configuration_type_id = event_mobile_configuration.id \n\tand member_id in (select child_id from childs) and state = ''PENDING''\n\treturning event_mobile_notification_pending.id\n)\nupdate imt_member set state = ''com.argusoft.imtecho.member.state.archived.outofstate'',\nmodified_on = now(), modified_by = #modified_by# where imt_member.id in (select child_id from childs);\n\nupdate imt_family set modified_on = now(), modified_by = #modified_by#,\nstate = case when #no_family# = true then ''com.argusoft.imtecho.family.state.archived.temporary.outofstate'' else state end\nwhere family_id = ''#family_migrated_to#'';","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id,no_family,reported_on,modified_by,id,family_migrated_to","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":59,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null}]},{"isConditionReq":true,"condition":"#out_of_state# == true && ''#type#'' == ''OUT''","conditionParam":"out_of_state,type","description":null,"notificaitonConfigsType":[{"id":"0e32f5de-a6f7-4311-ae04-eba920ba0929","type":"QUERY","template":"update techo_notification_master set \nstate = case when state = ''MARK_AS_MIGRATED_PENDING'' then ''PENDING'' \n\twhen state = ''MARK_AS_MIGRATED_RESCHEDULE'' then ''RESCHEDULE'' end, \nmodified_on = now(), modified_by = #modified_by# \nwhere member_id = #member_id# and state in (''MARK_AS_MIGRATED_PENDING'', ''MARK_AS_MIGRATED_RESCHEDULE'');\n\nupdate event_mobile_notification_pending set is_completed = false, state = ''PENDING'', \nmodified_by = #modified_by#, modified_on = now() from event_mobile_configuration \nwhere event_mobile_notification_pending.notification_configuration_type_id = event_mobile_configuration.id \nand member_id = #member_id# and state = ''MARK_AS_MIGRATED_PENDING'';\n\nupdate imt_member set modified_on = now(), modified_by = #modified_by#,\nstate = (\n\tselect from_state from imt_member_state_detail where member_id = #member_id#\n\tand from_state not in (\n\t\t''com.argusoft.imtecho.member.state.migrated'',\n\t\t''com.argusoft.imtecho.member.state.migrated.outofstate'',\n\t\t''com.argusoft.imtecho.member.state.migrated.lfu''\n\t) order by id desc limit 1\n)\nwhere imt_member.id = #member_id#;\n\nwith childs as(\n\tselect child_id from migration_child_rel where migration_id = #id#\n    union\n    select id from imt_member where mother_id = #member_id# and dob > ''#reported_on#''\n), update_notifications as (\n\tupdate techo_notification_master set \n\tstate = case when state = ''MARK_AS_MIGRATED_PENDING'' then ''PENDING'' \n\t\twhen state = ''MARK_AS_MIGRATED_RESCHEDULE'' then ''RESCHEDULE'' end, \n\tmodified_on = now(), modified_by = #modified_by# \n\twhere member_id in (select child_id from childs) and state in (''MARK_AS_MIGRATED_PENDING'', ''MARK_AS_MIGRATED_RESCHEDULE'')\n\treturning techo_notification_master.id\n), update_event as (\n\tupdate event_mobile_notification_pending set is_completed = false, state = ''PENDING'', \n\tmodified_by = #modified_by#, modified_on = now() from event_mobile_configuration \n\twhere event_mobile_notification_pending.notification_configuration_type_id = event_mobile_configuration.id \n\tand member_id in (select child_id from childs) and state = ''MARK_AS_MIGRATED_PENDING''\n\treturning event_mobile_notification_pending.id\n), max_states as (\n\tselect sd.member_id, max(id) from imt_member_state_detail sd\n\twhere member_id in (select child_id from childs) \n\tand sd.from_state not in (\n\t\t''com.argusoft.imtecho.member.state.migrated'',\n\t\t''com.argusoft.imtecho.member.state.migrated.outofstate'',\n\t\t''com.argusoft.imtecho.member.state.migrated.lfu''\n\t) \n\tgroup by sd.member_id\n), from_states as (\n\tselect member_id, from_state \n\tfrom imt_member_state_detail imsd\n\twhere id in (select max from max_states)\n)\nupdate imt_member set modified_on = now(), modified_by = #modified_by#,\nstate = from_states.from_state\nfrom from_states\nwhere imt_member.id = from_states.member_id","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id,reported_on,modified_by,id","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":59,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null}]}]}]','ACTIVE',NULL,'MIG_REVERT','32a56aad-96cd-450f-9d13-997893183d83'),
	 (31,58981,'2018-09-08 19:35:39.512',1,'2021-01-13 20:22:06.427965',NULL,NULL,'FORM_SUBMITTED',NULL,12,NULL,NULL,'Migration Out Response','[{"query":"select member_id, location_migrated_to, location_migrated_from, type, state, family_migrated_from, family_migrated_to, modified_by from migration_master where id = #resourceId#","queryParam":"resourceId","conditions":[{"isConditionReq":true,"condition":"state = ''CONFIRMED''","conditionParam":null,"description":null,"notificaitonConfigsType":[{"id":"e121f026-09f6-4f21-96e7-f633c00e0572","type":"QUERY","template":"update techo_notification_master set location_id = #location_migrated_to#, \nfamily_id = (select id from imt_family where family_id = ''#family_migrated_to#''), \nstate = case when state = ''MARK_AS_MIGRATED_PENDING'' then ''PENDING'' \n\twhen state = ''MARK_AS_MIGRATED_RESCHEDULE'' then ''RESCHEDULE'' end, \nmodified_on = now(), modified_by = #modified_by# \nwhere member_id = #member_id# and state in (''MARK_AS_MIGRATED_PENDING'', ''MARK_AS_MIGRATED_RESCHEDULE'');\n\nupdate event_mobile_notification_pending set is_completed = false, state = ''PENDING'', \nmodified_by = #modified_by#, modified_on = now() from event_mobile_configuration \nwhere event_mobile_notification_pending.notification_configuration_type_id = event_mobile_configuration.id \nand member_id = #member_id# and state = ''MARK_AS_MIGRATED_PENDING'';\n\nwith rows as(\n\tINSERT INTO imt_member_state_detail (member_id, from_state, to_state, created_by, created_on, modified_by, modified_on)\n\tVALUES(#member_id#, (select state from imt_member where id = #member_id#), \n\t\t(select from_state from imt_member_state_detail where id = (select current_state from imt_member where id = #member_id#)),\n\t\t#modified_by#, now(), #modified_by#, now()) RETURNING id)\nupdate imt_member set current_state = (select id from rows), \nstate = (select from_state from imt_member_state_detail where id = (select current_state from imt_member where id = #member_id#)), \nfamily_id = ''#family_migrated_to#'', modified_on = now(), modified_by = #modified_by# where imt_member.id = #member_id#;","mobileNotificationType":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id,location_migrated_to,modified_by,family_migrated_to","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":31,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null}]},{"isConditionReq":true,"condition":"state = ''NOT_HAPPEN''","conditionParam":null,"description":null,"notificaitonConfigsType":[{"id":"007b0d53-2e73-4888-b2f8-7e4aae99516b","type":"QUERY","template":"update techo_notification_master set location_id = #location_migrated_from#, \nfamily_id = (select id from imt_family where family_id = ''#family_migrated_from#''), \nstate = case when state = ''MARK_AS_MIGRATED_PENDING'' then ''PENDING'' \n\twhen state = ''MARK_AS_MIGRATED_RESCHEDULE'' then ''RESCHEDULE'' end, \nmodified_on = now(), modified_by = #modified_by# \nwhere member_id = #member_id# and state in (''MARK_AS_MIGRATED_PENDING'', ''MARK_AS_MIGRATED_RESCHEDULE'');\n\nupdate event_mobile_notification_pending set is_completed = false, state = ''PENDING'', \nmodified_by = #modified_by#, modified_on = now() from event_mobile_configuration \nwhere event_mobile_notification_pending.notification_configuration_type_id = event_mobile_configuration.id \nand member_id = #member_id# and state = ''MARK_AS_MIGRATED_PENDING'';\n\nwith rows as(\n\tINSERT INTO imt_member_state_detail (member_id, from_state, to_state, created_by, created_on, modified_by, modified_on)\n\tVALUES(#member_id#, (select state from imt_member where id = #member_id#), \n\t\t(select from_state from imt_member_state_detail where id = (select current_state from imt_member where id = #member_id#)),\n\t\t#modified_by#, now(), #modified_by#, now()) RETURNING id)\nupdate imt_member set current_state = (select id from rows), \nstate = (select from_state from imt_member_state_detail where id = (select current_state from imt_member where id = #member_id#)), \nfamily_id = ''#family_migrated_from#'', modified_on = now(), modified_by = #modified_by# where imt_member.id = #member_id#;","mobileNotificationType":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id,location_migrated_from,modified_by,family_migrated_from","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":31,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null}]}]}]','INACTIVE',NULL,'MIGRATION_OUT_RESP','fc43ae87-e855-4095-9a7d-ab4810fd270d'),
	 (28,58981,'2018-09-08 19:32:35.7',1,'2021-01-13 20:22:06.427965',NULL,NULL,'FORM_SUBMITTED',NULL,9,NULL,NULL,'Migration In Request','[{"query":"select mig.member_id, mig.location_migrated_to, mig.location_migrated_from, mig.type, mig.state, \nmig.family_migrated_from, mig.family_migrated_to, mig.modified_by, fam.area_id as area_id, \nfam.id as family_id, mem.state as member_state from migration_master mig inner join imt_family fam \non mig.family_migrated_to = fam.family_id inner join imt_member mem on mig.member_id = mem.id where mig.id = #resourceId#","queryParam":"resourceId","conditions":[{"isConditionReq":true,"condition":"''#member_state#'' == ''com.argusoft.imtecho.member.state.migrated''","conditionParam":"member_state","description":null,"notificaitonConfigsType":[{"id":"702d7913-e1da-4cda-875c-d6c68a401406","type":"QUERY","template":"update techo_notification_master set location_id = case when ''#area_id#'' is not null \nthen cast(''#area_id#'' as integer) else #location_migrated_to# end,\nfamily_id = #family_id#, modified_on = now(), modified_by = #modified_by# \nwhere member_id = #member_id# and state in (''PENDING'', ''RESCHEDULE''); \n\nupdate imt_member set family_id = ''#family_migrated_to#'', modified_on = now(), modified_by = #modified_by# \nwhere id = #member_id#;","mobileNotificationType":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id,family_id,location_migrated_to,modified_by,family_migrated_to,area_id","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":28,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null}]}]}]','INACTIVE',NULL,'MIGRATION_IN_REQ','8901dd94-8b17-47c7-b414-53e53a66f6e9'),
	 (80,58981,'2019-09-13 18:21:32.942',58981,'2021-01-19 17:20:19.266',NULL,NULL,'FORM_SUBMITTED',NULL,68,NULL,NULL,'ASHA LMP Follow Up Event','[{"query":"select rch_asha_lmp_follow_up.id, rch_asha_lmp_follow_up.member_id, rch_asha_lmp_follow_up.member_status, rch_asha_lmp_follow_up.year, \nimt_family.id as family_id, to_char(rch_asha_lmp_follow_up.service_date,''MM/DD/YYYY'') as service_date, \nimt_family.area_id as location_id, \nto_char(rch_asha_lmp_follow_up.lmp, ''MM/DD/YYYY'') as lmp_date, \nto_char(rch_asha_lmp_follow_up.lmp, ''MM/DD/YYYY'') as last_lmp_date, \nto_char(now(), ''MM/DD/YYYY'') as cur_date, \nto_char((rch_asha_lmp_follow_up.lmp + interval ''1'' day * (case when normal_cycle_days is null then 28 else normal_cycle_days end)), ''MM/DD/YYYY'') as next_lmp_date, \nto_char((rch_asha_lmp_follow_up.lmp + interval ''281 days''), ''MM/DD/YYYY'') as edd, \nrch_asha_lmp_follow_up.family_planning_method as family_planning_method, \n(case when rch_asha_lmp_follow_up.family_planning_method is null then imt_member.last_method_of_contraception else rch_asha_lmp_follow_up.family_planning_method end) as last_method_of_contraception, \nto_char(rch_asha_lmp_follow_up.fp_insert_operate_date, ''MM/DD/YYYY'') as fp_insert_operate_date, \n(case when rch_asha_lmp_follow_up.fp_insert_operate_date is null then imt_member.fp_insert_operate_date + interval ''90'' day > (rch_asha_lmp_follow_up.lmp + interval ''1'' day * (case when normal_cycle_days is null then 28 else normal_cycle_days end)) else rch_asha_lmp_follow_up.fp_insert_operate_date + interval ''90'' day > (rch_asha_lmp_follow_up.lmp + interval ''1'' day * (case when normal_cycle_days is null then 28 else normal_cycle_days end)) end) as to_generate_lmp_visit, \nrch_asha_lmp_follow_up.is_pregnant, \ntecho_notification_master.id as notification_id, \nrch_asha_lmp_follow_up.created_by as created_by, \nto_char(death_date, ''MM/DD/YYYY'') as death_date, \ndeath_reason, place_of_death, cast(null as text) as other_death_reason, \ntecho_notification_master.notification_code, \nto_char(case when imt_member.lmp is null then now() else imt_member.lmp end, ''MM/DD/YYYY'') as next_lmp_schedule_date \nfrom rch_asha_lmp_follow_up inner join imt_member on rch_asha_lmp_follow_up.member_id = imt_member.id \ninner join imt_family on imt_member.family_id = imt_family.family_id \nleft join techo_notification_master on techo_notification_master.member_id = rch_asha_lmp_follow_up.member_id \nand techo_notification_master.notification_type_id = (select id from notification_type_master where code = ''ASHA_LMPFU'')\nand techo_notification_master.state in (''PENDING'',''RESCHEDULE'') \nwhere rch_asha_lmp_follow_up.id = #resourceId# limit 1;","queryParam":"resourceId","conditions":[{"isConditionReq":true,"condition":"#year# != null || ''#lmp_date#'' != ''null'' || ''#family_planning_method#'' != ''null'' || ''#fp_insert_operate_date#'' != ''null''","conditionParam":"lmp_date,year,fp_insert_operate_date,family_planning_method","description":null,"notificaitonConfigsType":[{"id":"0c33ddb1-f0c6-4897-8408-50e4df146dbd","type":"QUERY","template":"update imt_member set year_of_wedding = (case when #year# is not null then #year# else year_of_wedding end), \nlmp = (case when ''#lmp_date#'' != ''null'' then to_date((case when ''#lmp_date#'' = ''null'' then ''1970-01-01'' else ''#lmp_date#'' end), ''MM/DD/YYYY'') else lmp end), \nlast_method_of_contraception = (case when ''#family_planning_method#'' != ''null'' then ''#family_planning_method#'' else last_method_of_contraception end), \nfp_insert_operate_date = (case when ''#fp_insert_operate_date#'' != ''null'' then to_date((case when ''#fp_insert_operate_date#'' = ''null'' then ''1970-01-01'' else ''#fp_insert_operate_date#'' end), ''MM/DD/YYYY'') else fp_insert_operate_date end),\nmodified_by = #created_by#, modified_on = now() where id = #member_id#;","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"lmp_date,member_id,year,fp_insert_operate_date,family_planning_method,created_by","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":80,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null}]},{"isConditionReq":true,"condition":"''#lmp_date#'' !== ''null'' && (#is_pregnant# == null || #is_pregnant# == false)","conditionParam":"lmp_date,is_pregnant","description":null,"notificaitonConfigsType":[{"id":"109c377a-740a-4e24-94d6-23d416e4ed03","type":"QUERY","template":null,"mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":null,"baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":80,"queryMasterId":null,"queryCode":"mob_notification_mark_as_complete","queryMasterParamJson":[{"parameterName":"action_by","mappingValue":"created_by","isFixed":false},{"parameterName":"notification_id","mappingValue":"notification_id","isFixed":false}],"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null},{"id":"5575355b-37df-46a6-aa4b-1fca5df85122","type":"QUERY","template":"update techo_notification_master set state = ''DONE_BY_ASHA''\nwhere member_id = #member_id# and state = ''PENDING''\nand notification_type_id = (select id from notification_type_master where code = ''LMPFU'');","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":80,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null},{"id":"eac4f01d-6a31-4f5a-98ce-bc378be878d4","type":"QUERY","template":null,"mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":null,"baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":80,"queryMasterId":null,"queryCode":"generate_lmp_followup","queryMasterParamJson":[{"parameterName":"member_id","mappingValue":"member_id","isFixed":false},{"parameterName":"family_id","mappingValue":"family_id","isFixed":false},{"parameterName":"schedule_date","mappingValue":"next_lmp_date","isFixed":false},{"parameterName":"member_location_id","mappingValue":"location_id","isFixed":false},{"parameterName":"created_by","mappingValue":"created_by","isFixed":false}],"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null},{"id":"cf0cc43e-8eaa-4293-a6da-f39cb8893c97","type":"QUERY","template":null,"mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":null,"baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":80,"queryMasterId":null,"queryCode":"generate_asha_lmpfu_notification","queryMasterParamJson":[{"parameterName":"member_id","mappingValue":"member_id","isFixed":false},{"parameterName":"family_id","mappingValue":"family_id","isFixed":false},{"parameterName":"schedule_date","mappingValue":"next_lmp_date","isFixed":false},{"parameterName":"member_location_id","mappingValue":"location_id","isFixed":false},{"parameterName":"created_by","mappingValue":"created_by","isFixed":false}],"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null}]},{"isConditionReq":true,"condition":"''#is_pregnant#'' !== ''null'' && #is_pregnant# == true","conditionParam":"is_pregnant","description":null,"notificaitonConfigsType":[{"id":"faa3aaa0-20ec-47ea-9277-8833c68760d2","type":"QUERY","template":null,"mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":null,"baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":80,"queryMasterId":null,"queryCode":"mob_notification_mark_as_complete","queryMasterParamJson":[{"parameterName":"action_by","mappingValue":"created_by","isFixed":false},{"parameterName":"notification_id","mappingValue":"notification_id","isFixed":false}],"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null},{"id":"60820764-542e-42be-825c-5696e221bbca","type":"QUERY","template":"update techo_notification_master set state = ''MARK_AS_NO_RESPONSE''\nwhere member_id = #member_id# and state = ''PENDING''\nand notification_type_id = (select id from notification_type_master where code = ''FHW_PREG_CONF'');","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":80,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null},{"id":"1ff1dfc8-0bf6-43dc-b81a-3370d07748c4","type":"QUERY","template":"update techo_notification_master set state = ''DONE_BY_ASHA''\nwhere member_id = #member_id# and state = ''PENDING''\nand notification_type_id = (select id from notification_type_master where code = ''LMPFU'');","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":80,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null},{"id":"18ae7ac6-0f2d-440d-b18a-606d34e1c8af","type":"QUERY","template":"INSERT INTO techo_notification_master(\nnotification_type_id, notification_code, location_id,family_id, member_id, schedule_date, due_on, expiry_date, ref_code,\nstate, created_by, created_on, modified_by, modified_on)\nselect (select id from notification_type_master  where code  = ''FHW_PREG_CONF''), 0, #location_id#,#family_id#,#member_id#,current_date,\ncurrent_date + interval ''3 days'',null,#id#,''PENDING'',#created_by#,now(),#created_by#,now();","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id,family_id,id,created_by,location_id","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":80,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null}]},{"isConditionReq":false,"condition":null,"conditionParam":null,"description":null,"notificaitonConfigsType":[{"id":"70c5aa5f-1a92-4a28-95fd-365231c42f49","type":"QUERY","template":"update techo_notification_master set state = ''COMPLETED'', action_by = #created_by#, modified_on = now() where member_id = #member_id# and state in (''PENDING'',''RESCHEDULE'') and notification_type_id = (select id from notification_type_master where code = ''ASHA_LMPFU'');","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id,created_by","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":80,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"systemFunctionId":null,"functionParams":null}]}]}]','ACTIVE',NULL,'ASHA_LMPFU','f4bf56fc-3c2f-4a7f-8e6c-527894c87edf'),
	 (29,58981,'2018-09-08 19:33:48.535',1,'2021-01-13 20:22:06.427965',NULL,NULL,'FORM_SUBMITTED',NULL,11,NULL,NULL,'Migration In Response','[{"query":"select mig.member_id, mig.location_migrated_to, mig.location_migrated_from, mig.type, mig.state, \nmig.family_migrated_from, mig.family_migrated_to, mig.modified_by, (case when fam.area_id is not null then cast(fam.area_id as integer) else fam.location_id end) as area_id, \nfam.id as family_id, mem.state as member_state from migration_master mig inner join imt_family fam \non mig.family_migrated_from = fam.family_id inner join imt_member mem on mig.member_id = mem.id where mig.id = #resourceId#","queryParam":"resourceId","conditions":[{"isConditionReq":true,"condition":"''#state#'' == ''NOT_HAPPENED''","conditionParam":"state","description":null,"notificaitonConfigsType":[{"id":"506f7934-cb16-4be0-a3b0-477b9b111d0a","type":"QUERY","template":"update techo_notification_master set location_id = cast(#area_id# as integer), family_id = #family_id#, modified_on = now(), modified_by = #modified_by# \nwhere member_id = #member_id# and state in (''PENDING'', ''RESCHEDULE''); \n\nupdate imt_member set family_id = ''#family_migrated_from#'', modified_on = now(), modified_by = #modified_by# \nwhere id = #member_id#;","mobileNotificationType":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id,family_id,modified_by,area_id,family_migrated_from","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":null,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null}]},{"isConditionReq":true,"condition":"''#state#'' == ''CONFIRMED''","conditionParam":"state","description":null,"notificaitonConfigsType":null}]}]','INACTIVE',NULL,'MIGRATION_IN_RESP','515dd6eb-0888-4fa1-a1c4-c4efb9ed0980'),
	 (43,409,'2018-12-31 05:47:51.535',1,'2021-01-13 20:22:06.427965',NULL,'Maternal Death Verification MO Two option accept / reject On reject member should start show. On accept or reject ttc notification should close.','FORM_SUBMITTED',NULL,30,NULL,NULL,'Maternal Death Verification MO','[{"query":"select techo_web_notification_master.id as resourse_id\n,rch_member_death_deatil.member_id\n,techo_web_notification_master.other_details \n,rch_member_death_deatil.id as death_detail_id\n,listvalue_field_value_detail.value as selected_action\n,listvalue_field_value_detail.id as selected_action_id\n,techo_web_notification_master.related_notification_id\n,techo_web_notification_master.modified_by as action_by\nfrom techo_web_notification_master,listvalue_field_value_detail,rch_member_death_deatil\nwhere cast(techo_web_notification_master.action_taken as integer) =  listvalue_field_value_detail.id\nand rch_member_death_deatil.id = techo_web_notification_master.ref_code\nand techo_web_notification_master.id = #resourceId#","queryParam":"resourceId","conditions":[{"isConditionReq":true,"condition":"\"#selected_action#\" == \"Reject\"","conditionParam":"selected_action","description":"","notificaitonConfigsType":[{"id":"860a59e3-a9b7-46ce-a341-3440607c63b1","type":"QUERY","template":null,"mobileNotificationType":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":null,"baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":43,"queryMasterId":null,"queryCode":"mark_as_false_death","queryMasterParamJson":[{"parameterName":"member_id","mappingValue":"member_id","isFixed":false},{"parameterName":"action_by","mappingValue":"action_by","isFixed":false}],"exceptionType":null,"exceptionMessage":null}]},{"isConditionReq":false,"condition":null,"conditionParam":null,"description":null,"notificaitonConfigsType":[{"id":"0f8dd025-5813-487c-b51e-d85cf234a4c8","type":"QUERY","template":null,"mobileNotificationType":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":null,"baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":43,"queryMasterId":null,"queryCode":"mark_techo_web_notification_as_complete","queryMasterParamJson":[{"parameterName":"action_by","mappingValue":"action_by","isFixed":false},{"parameterName":"notification_id","mappingValue":"related_notification_id","isFixed":false}],"exceptionType":null,"exceptionMessage":null},{"id":"ced7b562-dc27-4924-a04f-bf19bc986f4d","type":"QUERY","template":"UPDATE rch_member_death_deatil set death_reason = CASE WHEN ''#selected_action#'' = '''' THEN -1 else ''#selected_action_id#'' end, other_death_reason = CASE WHEN ''#selected_action#'' = '''' THEN ''#other_details#'' else null end, modified_by = ''#action_by#'', modified_on = now() where id=#death_detail_id#","mobileNotificationType":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"other_details,selected_action,action_by,death_detail_id,selected_action_id","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":43,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null}]}]}]','ACTIVE',NULL,'maternal_death_verification_mo','ec75fb39-d00f-40f8-9b51-f5944b093fd7'),
	 (65,58981,'2019-05-20 10:54:28.051',1,'2021-01-13 20:22:06.427965',NULL,NULL,'FORM_SUBMITTED',NULL,51,NULL,NULL,'Asha Child Service Visit','[{"query":"select id, member_id, family_id, location_id, notification_id, created_by, service_date, is_alive, death_date, death_place, death_reason, other_death_reason, weight from rch_asha_child_service_master where id = #resourceId#;","queryParam":"resourceId","conditions":[{"isConditionReq":true,"condition":"#weight# != null","conditionParam":"weight","description":null,"notificaitonConfigsType":[{"id":"5085aa49-18d8-4e26-9d7b-6761ea390783","type":"QUERY","template":"update imt_member set weight = #weight# where id = #member_id#","mobileNotificationType":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id,weight","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":65,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null}]},{"isConditionReq":true,"condition":"#notification_id# != null","conditionParam":"notification_id","description":null,"notificaitonConfigsType":[{"id":"549d9920-9c68-4f53-9265-e1e5ed0833a1","type":"QUERY","template":null,"mobileNotificationType":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":null,"baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":65,"queryMasterId":null,"queryCode":"mob_notification_mark_as_complete","queryMasterParamJson":[{"parameterName":"action_by","mappingValue":"created_by","isFixed":false},{"parameterName":"notification_id","mappingValue":"notification_id","isFixed":false}],"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null}]},{"isConditionReq":false,"condition":null,"conditionParam":null,"description":null,"notificaitonConfigsType":[{"id":"23bddf56-331e-4132-9457-5135f8c8cb1b","type":"QUERY","template":"update techo_notification_master set state = ''COMPLETED'', action_by = #created_by#, modified_on = now()\nwhere member_id = #member_id# and state = ''PENDING'' \nand notification_type_id = (select id from notification_type_master where code = ''ASHA_CS'')","mobileNotificationType":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id,created_by","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":65,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null}]}]}]','ACTIVE',NULL,'ASHA_CS','446ccaa4-d8ea-492f-ac4a-c9b977a090a0'),
	 (113,74840,'2020-03-16 10:47:48.721',1,'2021-01-13 20:22:06.427965',NULL,NULL,'FORM_SUBMITTED',NULL,92,NULL,NULL,'CFHC Suspected widget','[{"query":"select \ntecho_web_notification_master.id as web_notification_id,\ntecho_web_notification_master.modified_by as action_by,\nlistvalue_field_value_detail.value as selected_action,\ntecho_web_notification_master.ref_code\nfrom techo_web_notification_master\n,listvalue_field_value_detail\nwhere techo_web_notification_master.id  = #resourceId#\nand cast(techo_web_notification_master.action_taken as integer) =  listvalue_field_value_detail.id","queryParam":"resourceId","conditions":[{"isConditionReq":true,"condition":"\"#selected_action#\" == \"Suspected\"","conditionParam":"selected_action","description":null,"notificaitonConfigsType":[{"id":"34af8154-8f09-4501-84b1-c04f633550bf","type":"QUERY","template":"update techo_web_notification_master set state = ''PENDING'' where id = #web_notification_id#","mobileNotificationType":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"web_notification_id","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":113,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null}]},{"isConditionReq":true,"condition":"\"#selected_action#\" == \"Confirmed\"","conditionParam":"selected_action","description":null,"notificaitonConfigsType":[{"id":"7d0a6241-61a8-4751-816d-8e3bb07d8b27","type":"QUERY","template":"INSERT INTO techo_web_notification_master(\n            notification_type_id, location_id, \n            member_id, escalation_level_id, schedule_date, \n            state, created_by, created_on, \n            modified_by, modified_on, ref_code, notification_type_escalation_id\n            )\nselect notification_type.notification_type_id,twn.location_id,twn.member_id,\nnotification_type.id,now(),''PENDING'',modified_by,now(),-1,now(),twn.ref_code,notification_type.notification_type_id||''_''||notification_type.id\nfrom techo_web_notification_master twn,\n(select id,notification_type_id from escalation_level_master where name = ''Default'' \nand notification_type_id = (select id from notification_type_master where code = ''cfhc_confirm_disease'')) as notification_type\nwhere twn.id =  #web_notification_id#;","mobileNotificationType":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"web_notification_id","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":113,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null}]},{"isConditionReq":false,"condition":null,"conditionParam":null,"description":null,"notificaitonConfigsType":[{"id":"621d6b27-c3dd-4447-a7d1-d989380c56db","type":"QUERY","template":"update wt_cfhc_suspected_disease set status = ''#selected_action#'',modified_by = #action_by# where id = #ref_code#","mobileNotificationType":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"selected_action,action_by,ref_code","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":113,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null}]}]}]','ACTIVE',NULL,'cfhc_suspected_disease','fd2dd718-5298-47ed-b28b-2ae63285c66e'),
	 (66,58981,'2019-05-20 10:59:06.934',1,'2021-01-13 20:22:06.427965',NULL,NULL,'FORM_SUBMITTED',NULL,50,NULL,NULL,'Asha PNC Visit','[{"query":"select rch_asha_pnc_master.id, rch_asha_pnc_master.member_id, rch_asha_pnc_master.family_id, \nrch_asha_pnc_master.location_id, \nrch_asha_pnc_master.notification_id, rch_asha_pnc_master.created_by, \nrch_asha_pnc_master.pregnancy_reg_det_id, rch_asha_pnc_master.service_date,\nrch_asha_pnc_mother_master.is_alive, rch_asha_pnc_mother_master.death_date,\nrch_asha_pnc_mother_master.death_place, rch_asha_pnc_mother_master.death_reason,\nrch_asha_pnc_mother_master.other_death_reason\nfrom rch_asha_pnc_master left join rch_asha_pnc_mother_master on rch_asha_pnc_master.id = rch_asha_pnc_mother_master.pnc_master_id\nwhere rch_asha_pnc_master.id = #resourceId#","queryParam":"resourceId","conditions":[{"isConditionReq":true,"condition":"#notification_id# != null","conditionParam":"notification_id","description":null,"notificaitonConfigsType":[{"id":"142bf8d8-98f0-4dbf-aa47-3985cae55c67","type":"QUERY","template":null,"mobileNotificationType":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":null,"baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":66,"queryMasterId":null,"queryCode":"mob_notification_mark_as_complete","queryMasterParamJson":[{"parameterName":"action_by","mappingValue":"created_by","isFixed":false},{"parameterName":"notification_id","mappingValue":"notification_id","isFixed":false}],"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null}]},{"isConditionReq":false,"condition":null,"conditionParam":null,"description":null,"notificaitonConfigsType":[{"id":"19dda3d6-cb1b-471c-b48c-94ed285814aa","type":"QUERY","template":"update techo_notification_master set state = ''COMPLETED'', action_by = #created_by#, modified_on = now()\nwhere member_id = #member_id# and state in (''PENDING'',''RESCHEDULE'') \nand notification_type_id = (select id from notification_type_master where code = ''ASHA_PNC'')","mobileNotificationType":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id,created_by","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":66,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null}]}]},{"query":"select rch_asha_pnc_child_master.id, rch_asha_pnc_master.family_id, rch_asha_pnc_child_master.child_id as member_id, \nrch_asha_pnc_master.location_id, \nrch_asha_pnc_master.created_by, rch_asha_pnc_child_master.is_alive,\nto_char(rch_asha_pnc_child_master.death_date,''MM/DD/YYYY'') as death_date, \nrch_asha_pnc_child_master.death_reason, rch_asha_pnc_child_master.death_place, \nrch_asha_pnc_child_master.other_death_reason \nfrom rch_asha_pnc_master \ninner join rch_asha_pnc_child_master on rch_asha_pnc_master.id = rch_asha_pnc_child_master.pnc_master_id \nwhere rch_asha_pnc_master.id = #resourceId#;","queryParam":"resourceId","conditions":[{"isConditionReq":true,"condition":"#weight# != null","conditionParam":"weight","description":null,"notificaitonConfigsType":[{"id":"0893ebae-2282-41f4-b315-2db92ba6ae6b","type":"QUERY","template":"update imt_member set weight = #weight# where id = #member_id#","mobileNotificationType":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id,weight","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":66,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null}]}]}]','ACTIVE',NULL,'ASHA_PNC','496a1c67-623f-4283-859b-8a5d9c07a5dc'),
	 (116,74841,'2020-03-17 15:55:19.202',1,'2021-01-13 20:22:06.427965',NULL,NULL,'FORM_SUBMITTED',NULL,94,NULL,NULL,'CFHC Death Verification MO','[{"query":"select techo_web_notification_master.id as resourse_id\n,rch_member_death_deatil.member_id\n,techo_web_notification_master.other_details \n,rch_member_death_deatil.id as death_detail_id\n,listvalue_field_value_detail.value as selected_action\n,listvalue_field_value_detail.id as selected_action_id\n,techo_web_notification_master.related_notification_id\n,techo_web_notification_master.modified_by as action_by\nfrom techo_web_notification_master,listvalue_field_value_detail,rch_member_death_deatil\nwhere cast(techo_web_notification_master.action_taken as integer) =  listvalue_field_value_detail.id\nand rch_member_death_deatil.id = techo_web_notification_master.ref_code\nand techo_web_notification_master.id = #resourceId#","queryParam":"resourceId","conditions":[{"isConditionReq":true,"condition":"\"#selected_action#\" == \"Mark As False Death\"","conditionParam":"selected_action","description":null,"notificaitonConfigsType":[{"id":"fc411fc5-28eb-43ec-8efd-d7aa2d0e849d","type":"QUERY","template":null,"mobileNotificationType":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":null,"baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":null,"queryMasterId":null,"queryCode":"mark_as_false_death","queryMasterParamJson":[{"parameterName":"member_id","mappingValue":"member_id","isFixed":false},{"parameterName":"action_by","mappingValue":"action_by","isFixed":false}],"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null}]},{"isConditionReq":false,"condition":null,"conditionParam":null,"description":null,"notificaitonConfigsType":[{"id":"858af8d5-49c4-4344-8b78-7455c71a5f52","type":"QUERY","template":null,"mobileNotificationType":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":null,"baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":null,"queryMasterId":null,"queryCode":"mark_techo_web_notification_as_complete","queryMasterParamJson":[{"parameterName":"action_by","mappingValue":"action_by","isFixed":false},{"parameterName":"notification_id","mappingValue":"related_notification_id","isFixed":false}],"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null},{"id":"abe7c1af-90fe-47d9-a2ca-2529fe5cc136","type":"QUERY","template":"update\n\trch_member_death_deatil\nset\n\tdeath_reason =\n\tcase\n\t\twhen ''#selected_action#'' = '''' then -1\n\t\telse ''#selected_action_id#''\n\tend,\n\tother_death_reason =\n\tcase\n\t\twhen ''#selected_action#'' = '''' then ''#other_details#''\n\t\telse null\n\tend,\n\tmodified_by = ''#action_by#'',\n\tmodified_on = now()\nwhere\n\tid =#death_detail_id#","mobileNotificationType":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"other_details,selected_action,action_by,death_detail_id,selected_action_id","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":null,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null}]}]}]','ACTIVE',NULL,'cfhc_death_verification_mo','1a39ecaf-894b-4cb2-a80f-eecb2e2e2f7a'),
	 (24,1027,'2018-07-30 19:49:16.783',1,'2023-07-06 20:08:41.184',NULL,NULL,'FORM_SUBMITTED',NULL,1,NULL,NULL,'LMP Followup','[{"query":"select rch_lmp_follow_up.id, rch_lmp_follow_up.member_id, member_status, year, imt_family.id as family_id, \nto_char(rch_lmp_follow_up.date_of_wedding, ''MM/DD/YYYY'') as date_of_wedding, \nto_char(rch_lmp_follow_up.service_date,''MM/DD/YYYY'') as service_date, \n(case when imt_family.area_id is null then imt_family.location_id else cast(imt_family.area_id as integer) end) as location_id, \nto_char(rch_lmp_follow_up.lmp, ''MM/DD/YYYY'') as lmp_date, \nto_char(rch_lmp_follow_up.lmp, ''MM/DD/YYYY'') as last_lmp_date, \nto_char(now(), ''MM/DD/YYYY'') as cur_date, \nto_char((rch_lmp_follow_up.lmp + interval ''1'' day * (case when normal_cycle_days is null then 28 else normal_cycle_days end)), ''MM/DD/YYYY'') as next_lmp_date, \nto_char((rch_lmp_follow_up.lmp + interval ''1'' day * 281), ''MM/DD/YYYY'') as edd, \nrch_lmp_follow_up.family_planning_method as family_planning_method, \n(case when rch_lmp_follow_up.family_planning_method is null then imt_member.last_method_of_contraception else rch_lmp_follow_up.family_planning_method end) as last_method_of_contraception, \nto_char(rch_lmp_follow_up.fp_insert_operate_date, ''MM/DD/YYYY'') as fp_insert_operate_date, \n(case when rch_lmp_follow_up.fp_insert_operate_date is null then imt_member.fp_insert_operate_date + interval ''90'' day > (rch_lmp_follow_up.lmp + interval ''1'' day * (case when normal_cycle_days is null then 28 else normal_cycle_days end)) else rch_lmp_follow_up.fp_insert_operate_date + interval ''90'' day > (rch_lmp_follow_up.lmp + interval ''1'' day * (case when normal_cycle_days is null then 28 else normal_cycle_days end)) end) as to_generate_lmp_visit, \nrch_lmp_follow_up.is_pregnant, \ntecho_notification_master.id as notification_id, \nrch_lmp_follow_up.created_by as created_by, \nto_char(death_date, ''MM/DD/YYYY'') as death_date, \ndeath_reason, place_of_death, cast(null as text) as other_death_reason, death_infra_id,\ntecho_notification_master.notification_code, \nto_char(case when imt_member.lmp is null then now() else imt_member.lmp end, ''MM/DD/YYYY'') as next_lmp_schedule_date, \nrch_lmp_follow_up.current_gravida, rch_lmp_follow_up.current_para\nfrom rch_lmp_follow_up inner join imt_member on rch_lmp_follow_up.member_id = imt_member.id \ninner join imt_family on imt_member.family_id = imt_family.family_id \nleft join techo_notification_master on techo_notification_master.member_id = rch_lmp_follow_up.member_id \nand techo_notification_master.notification_type_id = 1 \nand techo_notification_master.state in (''PENDING'',''RESCHEDULE'') \nwhere rch_lmp_follow_up.id = #resourceId# limit 1;","queryParam":"resourceId","conditions":[{"isConditionReq":true,"condition":"''#member_status#'' == ''AVAILABLE'' && ''#lmp_date#'' == ''null'' && (''#is_pregnant#'' == ''null'' || #is_pregnant# == false) && ''#notification_code#'' == ''0''","conditionParam":"lmp_date,is_pregnant,member_status,notification_code","description":null,"notificaitonConfigsType":[{"id":"dc474c48-fe8d-466f-bfc9-05861100a7cb","type":"QUERY","template":null,"mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":null,"baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":24,"queryMasterId":52,"queryCode":"mob_notification_reschedule","queryMasterParamJson":[{"parameterName":"expiary_days_add","mappingValue":null,"isFixed":false},{"parameterName":"action_by","mappingValue":"created_by","isFixed":false},{"parameterName":"due_days_add","mappingValue":null,"isFixed":false},{"parameterName":"schedule_days_add","mappingValue":"5","isFixed":true},{"parameterName":"notification_id","mappingValue":"notification_id","isFixed":false}],"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"pushNotificationConfigJson":null,"systemFunctionId":null,"functionParams":null},{"id":"54021c0f-093c-4eae-899a-adb2f9eff1c9","type":"QUERY","template":"update techo_notification_master set notification_code = case when notification_code = ''0'' then cast(cast(notification_code as integer) + 1 as character varying) else notification_code end where id = #notification_id#","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"notification_id","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":24,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"pushNotificationConfigJson":null,"systemFunctionId":null,"functionParams":null}]},{"isConditionReq":true,"condition":"''#member_status#'' == ''DEATH''","conditionParam":"member_status","description":null,"notificaitonConfigsType":[{"id":"91f1cd4e-b006-4ac3-bfe0-c30595675413","type":"QUERY","template":null,"mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":null,"baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":24,"queryMasterId":53,"queryCode":"mob_notification_mark_as_complete","queryMasterParamJson":[{"parameterName":"action_by","mappingValue":"created_by","isFixed":false},{"parameterName":"notification_id","mappingValue":"notification_id","isFixed":false}],"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"pushNotificationConfigJson":null,"systemFunctionId":null,"functionParams":null},{"id":"7ebffd7f-3205-423e-b3d0-51c87fb5f3d6","type":"QUERY","template":null,"mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":null,"baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":24,"queryMasterId":56,"queryCode":"mark_member_as_death","queryMasterParamJson":[{"parameterName":"member_id","mappingValue":"member_id","isFixed":false},{"parameterName":"action_by","mappingValue":"created_by","isFixed":false},{"parameterName":"family_id","mappingValue":"family_id","isFixed":false},{"parameterName":"service_type","mappingValue":"FHW_LMP","isFixed":true},{"parameterName":"reference_id","mappingValue":"id","isFixed":false},{"parameterName":"death_reason","mappingValue":"death_reason","isFixed":false},{"parameterName":"other_death_reason","mappingValue":"other_death_reason","isFixed":false},{"parameterName":"place_of_death","mappingValue":"place_of_death","isFixed":false},{"parameterName":"location_id","mappingValue":"location_id","isFixed":false},{"parameterName":"death_date","mappingValue":"death_date","isFixed":false},{"parameterName":"health_infra_id","mappingValue":"death_infra_id","isFixed":false}],"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"pushNotificationConfigJson":null,"systemFunctionId":null,"functionParams":null}]},{"isConditionReq":true,"condition":"#year# != null || ''#lmp_date#'' != ''null'' || ''#family_planning_method#'' != ''null'' || ''#fp_insert_operate_date#'' != ''null'' || ''#date_of_wedding#'' != ''null'' || #current_gravida# != null || #current_para# != null","conditionParam":"lmp_date,date_of_wedding,year,fp_insert_operate_date,family_planning_method,current_para,current_gravida","description":null,"notificaitonConfigsType":[{"id":"70fcf116-10f7-44be-b309-53bd71ef19a7","type":"QUERY","template":"update imt_member set year_of_wedding = (case when #year# is not null then #year# else year_of_wedding end), \ndate_of_wedding = (case when ''#date_of_wedding#'' != ''null'' then to_date((case when ''#date_of_wedding#'' = ''null'' then ''1970-01-01'' else ''#date_of_wedding#'' end), ''MM/DD/YYYY'') else date_of_wedding end),\nlmp = (case when ''#lmp_date#'' != ''null'' then to_date((case when ''#lmp_date#'' = ''null'' then ''1970-01-01'' else ''#lmp_date#'' end), ''MM/DD/YYYY'') else lmp end), \nlast_method_of_contraception = (case when ''#family_planning_method#'' != ''null'' then ''#family_planning_method#'' else last_method_of_contraception end),\nfp_insert_operate_date = (\n\tcase when ''#fp_insert_operate_date#'' != ''null'' \n\t\tthen to_date(case when ''#fp_insert_operate_date#'' = ''null'' then ''1970-01-01'' else ''#fp_insert_operate_date#'' end, ''MM/DD/YYYY'') \n\t\telse fp_insert_operate_date end),\ncurrent_gravida = case when #current_gravida# is not null then #current_gravida# else current_gravida end,\ncurrent_para = case when #current_para# is not null then #current_para# else current_para end,\nmodified_by = #created_by#, modified_on = now() \nwhere id = #member_id#;","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"date_of_wedding,lmp_date,member_id,year,fp_insert_operate_date,family_planning_method,current_para,created_by,current_gravida","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":24,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"pushNotificationConfigJson":null,"systemFunctionId":null,"functionParams":null}]},{"isConditionReq":true,"condition":"''#lmp_date#'' !== ''null''","conditionParam":"lmp_date","description":null,"notificaitonConfigsType":[{"id":"b059db39-4a17-41a4-a2dd-fc57582c717a","type":"QUERY","template":null,"mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":null,"baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":24,"queryMasterId":53,"queryCode":"mob_notification_mark_as_complete","queryMasterParamJson":[{"parameterName":"action_by","mappingValue":"created_by","isFixed":false},{"parameterName":"notification_id","mappingValue":"notification_id","isFixed":false}],"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"pushNotificationConfigJson":null,"systemFunctionId":null,"functionParams":null}]},{"isConditionReq":true,"condition":"''#is_pregnant#'' !== ''null'' && #is_pregnant# == true","conditionParam":"is_pregnant","description":null,"notificaitonConfigsType":[{"id":"81880422-23d5-43a6-8bf9-42d968b64f43","type":"QUERY","template":null,"mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":null,"baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":24,"queryMasterId":53,"queryCode":"mob_notification_mark_as_complete","queryMasterParamJson":[{"parameterName":"action_by","mappingValue":"created_by","isFixed":false},{"parameterName":"notification_id","mappingValue":"notification_id","isFixed":false}],"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"pushNotificationConfigJson":null,"systemFunctionId":null,"functionParams":null},{"id":"5d1131bc-f5bc-4a4a-8d7d-6dfd3f512f0a","type":"MOBILE","template":null,"mobileNotificationType":2,"mobileNotificationTypeUUID":"d6eae54f-0650-4985-9628-c6a37a92c4d4","emailSubject":null,"emailSubjectParameter":null,"templateParameter":null,"baseDateFieldName":"last_lmp_date","refCode":"","memberFieldName":"member_id","userFieldName":null,"familyFieldName":"family_id","trigerWhen":null,"day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":[{"id":"5ee09d52-f3ec-4c75-8a02-d18a7e6ce066","notificationCode":"1","numberOfDaysAddedForOnDate":0,"numberOfDaysAddedForDueDate":28,"numberOfDaysAddedForExpiryDate":91,"notificationTypeConfigId":"5d1131bc-f5bc-4a4a-8d7d-6dfd3f512f0a"},{"id":"a90441c0-20cb-423e-9626-6e991a48375d","notificationCode":"2","numberOfDaysAddedForOnDate":92,"numberOfDaysAddedForDueDate":28,"numberOfDaysAddedForExpiryDate":189,"notificationTypeConfigId":"5d1131bc-f5bc-4a4a-8d7d-6dfd3f512f0a"},{"id":"06e835bb-f352-4f53-a5bf-76cb93685529","notificationCode":"3","numberOfDaysAddedForOnDate":190,"numberOfDaysAddedForDueDate":28,"numberOfDaysAddedForExpiryDate":245,"notificationTypeConfigId":"5d1131bc-f5bc-4a4a-8d7d-6dfd3f512f0a"},{"id":"28a9d911-4a3d-45d8-ae9d-02d241348302","notificationCode":"4","numberOfDaysAddedForOnDate":246,"numberOfDaysAddedForDueDate":28,"numberOfDaysAddedForExpiryDate":null,"notificationTypeConfigId":"5d1131bc-f5bc-4a4a-8d7d-6dfd3f512f0a"}],"configId":24,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"pushNotificationConfigJson":null,"systemFunctionId":null,"functionParams":null},{"id":"fb77b27a-fd04-434e-b856-2c563f63af27","type":"MOBILE","template":null,"mobileNotificationType":44,"mobileNotificationTypeUUID":"36c98c12-2dd1-4593-956b-4d8f9e02419d","emailSubject":null,"emailSubjectParameter":null,"templateParameter":null,"baseDateFieldName":"last_lmp_date","refCode":null,"memberFieldName":"member_id","userFieldName":null,"familyFieldName":"family_id","trigerWhen":null,"day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":[{"id":"a268b579-fa16-4c61-a401-c2c4deb516f0","notificationCode":"1","numberOfDaysAddedForOnDate":0,"numberOfDaysAddedForDueDate":28,"numberOfDaysAddedForExpiryDate":160,"notificationTypeConfigId":"fb77b27a-fd04-434e-b856-2c563f63af27"},{"id":"c387698c-e0a3-4216-ba24-8909505dca9a","notificationCode":"2","numberOfDaysAddedForOnDate":161,"numberOfDaysAddedForDueDate":28,"numberOfDaysAddedForExpiryDate":216,"notificationTypeConfigId":"fb77b27a-fd04-434e-b856-2c563f63af27"},{"id":"65d265be-9ae4-4c50-a6f8-e8f14daf8dc0","notificationCode":"3","numberOfDaysAddedForOnDate":217,"numberOfDaysAddedForDueDate":28,"numberOfDaysAddedForExpiryDate":244,"notificationTypeConfigId":"fb77b27a-fd04-434e-b856-2c563f63af27"},{"id":"53bcfb3d-5b31-401b-a7b8-e9e91d6d6441","notificationCode":"4","numberOfDaysAddedForOnDate":245,"numberOfDaysAddedForDueDate":28,"numberOfDaysAddedForExpiryDate":null,"notificationTypeConfigId":"fb77b27a-fd04-434e-b856-2c563f63af27"}],"configId":24,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"pushNotificationConfigJson":null,"systemFunctionId":null,"functionParams":null},{"id":"faedb8e7-3e46-40a2-a9ac-ea7d5de944fa","type":"MOBILE","template":null,"mobileNotificationType":5,"mobileNotificationTypeUUID":"7d3d809f-e90f-40a2-95a8-f1e5fe3aeb0d","emailSubject":null,"emailSubjectParameter":null,"templateParameter":null,"baseDateFieldName":"last_lmp_date","refCode":null,"memberFieldName":"member_id","userFieldName":null,"familyFieldName":"family_id","trigerWhen":null,"day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":[{"id":"1337a6d4-d98d-4000-83ca-b81a5151c869","notificationCode":"0","numberOfDaysAddedForOnDate":267,"numberOfDaysAddedForDueDate":7,"numberOfDaysAddedForExpiryDate":null,"notificationTypeConfigId":"faedb8e7-3e46-40a2-a9ac-ea7d5de944fa"}],"configId":24,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"pushNotificationConfigJson":null,"systemFunctionId":null,"functionParams":null},{"id":"e57ce81b-d5a8-4d40-a8c1-fe265a8536e7","type":"QUERY","template":"with rows as ( INSERT INTO rch_pregnancy_registration_det( member_id, family_id, lmp_date, edd, reg_date, state,location_id,current_location_id, created_on, created_by, modified_on, modified_by) VALUES (#member_id#, #family_id#, ''#last_lmp_date#'', ''#edd#'', ''#service_date#'', ''PENDING'', #location_id#, #location_id# ,now(), #created_by#, now(), #created_by#) RETURNING id ) update imt_member set is_pregnant = true, edd = ''#edd#'', early_registration = (to_date(''#last_lmp_date#'', ''MM/DD/YYYY'') + INTERVAL ''84 days'') >= to_date(''#service_date#'', ''MM/DD/YYYY'') , cur_preg_reg_det_id = (select id from rows), cur_preg_reg_date=''#service_date#'', anc_visit_dates = null, immunisation_given = null, modified_by = ''#created_by#'', modified_on = now() where id= #member_id# ;","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id,family_id,edd,service_date,last_lmp_date,created_by,location_id","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":24,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"pushNotificationConfigJson":null,"systemFunctionId":null,"functionParams":null},{"id":"112fbaf9-9f82-4b38-9a12-d3a06a31dd33","type":"QUERY","template":"update event_mobile_notification_pending set ref_code = (select cur_preg_reg_det_id from imt_member where id = ''#member_id#'') where member_id = ''#member_id#'' and state = ''PENDING'' and ref_code=-1;","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":24,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"pushNotificationConfigJson":null,"systemFunctionId":null,"functionParams":null},{"id":"8c06b081-964e-4bba-ba2d-3e349a644652","type":"QUERY","template":"update techo_notification_master set state = ''MARK_AS_PREGNANT'' where member_id = #member_id# and state in (''PENDING'', ''RESCHEDULE'') and notification_type_id = (select id from notification_type_master where code = ''LMPFU'')","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":24,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"pushNotificationConfigJson":null,"systemFunctionId":null,"functionParams":null},{"id":"a7b9413a-f112-4180-bb13-ea60f1054b5e","type":"QUERY","template":"update techo_notification_master set ref_code = (select cur_preg_reg_det_id from imt_member where id = #member_id#)\nwhere member_id = #member_id# and state in (''PENDING'') and \nnotification_type_id in (select id from notification_type_master where code in (''FHW_ANC'',''FHW_WPD''));","mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":"member_id","baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":24,"queryMasterId":null,"queryCode":null,"queryMasterParamJson":null,"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"pushNotificationConfigJson":null,"systemFunctionId":null,"functionParams":null}]},{"isConditionReq":true,"condition":"''#lmp_date#'' !== ''null'' && #is_pregnant# == false && (''#last_method_of_contraception#'' == ''null'' || (''#last_method_of_contraception#'' != ''MLSTR'' && ''#last_method_of_contraception#'' != ''FMLSTR''))","conditionParam":"lmp_date,is_pregnant,last_method_of_contraception","description":null,"notificaitonConfigsType":[{"id":"578fc23c-b2fe-4172-b127-8bb1d9192cbb","type":"QUERY","template":null,"mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":null,"baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":24,"queryMasterId":null,"queryCode":"generate_lmp_followup","queryMasterParamJson":[{"parameterName":"member_id","mappingValue":"member_id","isFixed":false},{"parameterName":"family_id","mappingValue":"family_id","isFixed":false},{"parameterName":"schedule_date","mappingValue":"next_lmp_date","isFixed":false},{"parameterName":"member_location_id","mappingValue":"location_id","isFixed":false},{"parameterName":"created_by","mappingValue":"created_by","isFixed":false}],"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"pushNotificationConfigJson":null,"systemFunctionId":null,"functionParams":null}]},{"isConditionReq":true,"condition":"''#last_method_of_contraception#'' != ''null'' && (''#last_method_of_contraception#'' == ''MLSTR'' || ''#last_method_of_contraception#'' == ''FMLSTR'') && ''#to_generate_lmp_visit#''","conditionParam":"to_generate_lmp_visit,last_method_of_contraception","description":null,"notificaitonConfigsType":[{"id":"aa4f85aa-3043-48c9-8d04-e4093abff918","type":"QUERY","template":null,"mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":null,"baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":24,"queryMasterId":null,"queryCode":"generate_lmp_followup","queryMasterParamJson":[{"parameterName":"member_id","mappingValue":"member_id","isFixed":false},{"parameterName":"family_id","mappingValue":"family_id","isFixed":false},{"parameterName":"schedule_date","mappingValue":"next_lmp_date","isFixed":false},{"parameterName":"member_location_id","mappingValue":"location_id","isFixed":false},{"parameterName":"created_by","mappingValue":"created_by","isFixed":false}],"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"pushNotificationConfigJson":null,"systemFunctionId":null,"functionParams":null}]},{"isConditionReq":true,"condition":"''#member_status#'' == ''AVAILABLE'' && ''#lmp_date#'' == ''null'' && (''#is_pregnant#'' == ''null'' || #is_pregnant# == false) && ''#notification_code#'' == ''1''","conditionParam":"lmp_date,is_pregnant,member_status,notification_code","description":null,"notificaitonConfigsType":[{"id":"68539887-b180-4461-b418-ddac0470d653","type":"QUERY","template":null,"mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":null,"baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":24,"queryMasterId":null,"queryCode":"mob_notification_mark_as_complete","queryMasterParamJson":[{"parameterName":"action_by","mappingValue":"created_by","isFixed":false},{"parameterName":"notification_id","mappingValue":"notification_id","isFixed":false}],"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"pushNotificationConfigJson":null,"systemFunctionId":null,"functionParams":null},{"id":"0214a9cd-f111-452a-bc81-8408cc5f03b4","type":"QUERY","template":null,"mobileNotificationType":null,"mobileNotificationTypeUUID":null,"emailSubject":null,"emailSubjectParameter":null,"templateParameter":null,"baseDateFieldName":null,"refCode":null,"memberFieldName":null,"userFieldName":null,"familyFieldName":null,"trigerWhen":"IMMEDIATELY","day":null,"hour":null,"miniute":null,"mobileNotificationConfigs":null,"configId":24,"queryMasterId":null,"queryCode":"generate_lmp_followup","queryMasterParamJson":[{"parameterName":"member_id","mappingValue":"member_id","isFixed":false},{"parameterName":"family_id","mappingValue":"family_id","isFixed":false},{"parameterName":"schedule_date","mappingValue":"next_lmp_schedule_date","isFixed":false},{"parameterName":"member_location_id","mappingValue":"location_id","isFixed":false},{"parameterName":"created_by","mappingValue":"created_by","isFixed":false}],"exceptionType":null,"exceptionMessage":null,"smsConfigJson":null,"pushNotificationConfigJson":null,"systemFunctionId":null,"functionParams":null}]}]}]','ACTIVE',NULL,'FHW_LMPFU','fd52fb4e-aa72-41a9-ae33-f507b7022709');